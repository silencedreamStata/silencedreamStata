<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第1讲 引言 | Silencedream</title>
    <meta name="description" content="一个分享想法与知识的小网站">
    <meta name="generator" content="VitePress v1.1.4">
    <link rel="preload stylesheet" href="/silencedream/assets/style.B9hFFbJI.css" as="style">
    
    <script type="module" src="/silencedream/assets/app.DIf-nJyV.js"></script>
    <link rel="preload" href="/silencedream/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/silencedream/assets/chunks/theme.C_NdVHNt.js">
    <link rel="modulepreload" href="/silencedream/assets/chunks/framework.ZVjbeeCo.js">
    <link rel="modulepreload" href="/silencedream/assets/EmpiricalStudy.md.L-ijHO-r.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8291ffa></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8291ffa> Skip to content </a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar top" data-v-7ad780c2 data-v-844edcde><div class="wrapper" data-v-844edcde><div class="container" data-v-844edcde><div class="title" data-v-844edcde><div class="VPNavBarTitle" data-v-844edcde data-v-0ad69264><a class="title" href="/silencedream/" data-v-0ad69264><!--[--><!--]--><!----><span data-v-0ad69264>Silencedream</span><!--[--><!--]--></a></div></div><div class="content" data-v-844edcde><div class="content-body" data-v-844edcde><!--[--><!--]--><div class="VPNavBarSearch search" data-v-844edcde><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-844edcde data-v-f732b5d0><span id="main-nav-aria-label" class="visually-hidden" data-v-f732b5d0>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/silencedream/" tabindex="0" data-v-f732b5d0 data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>Home</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f732b5d0 data-v-af5898d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-af5898d3><span class="text" data-v-af5898d3><!----><span data-v-af5898d3>Stata</span><span class="vpi-chevron-down text-icon" data-v-af5898d3></span></span></button><div class="menu" data-v-af5898d3><div class="VPMenu" data-v-af5898d3 data-v-e42ed9b3><div class="items" data-v-e42ed9b3><!--[--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/silencedream/StataIntro/%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE.html" data-v-f51f088d><!--[-->Stata入门<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/silencedream/StataDraw/%E5%88%B6%E4%BD%9C%E5%B9%B4%E5%BA%A6%E5%88%86%E5%B8%83%E5%9B%BE.html" data-v-f51f088d><!--[-->Stata绘图<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/silencedream/Stataputdocx/stata_putdocx.html" data-v-f51f088d><!--[-->Stata Putdocx<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f732b5d0 data-v-af5898d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-af5898d3><span class="text" data-v-af5898d3><!----><span data-v-af5898d3>Python</span><span class="vpi-chevron-down text-icon" data-v-af5898d3></span></span></button><div class="menu" data-v-af5898d3><div class="VPMenu" data-v-af5898d3 data-v-e42ed9b3><div class="items" data-v-e42ed9b3><!--[--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/silencedream/PythonIntro/Python%E7%9A%84%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D.html" data-v-f51f088d><!--[-->入门操作<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/silencedream/PythonTextAnalysis/%E5%85%B3%E4%BA%8E%E6%96%87%E6%9C%AC%E5%88%86%E6%9E%90%E7%9A%84%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D.html" data-v-f51f088d><!--[-->文本分析<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/silencedream/PythonSpider/%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3%E7%88%AC%E8%99%AB.html" data-v-f51f088d><!--[-->网页爬虫<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/silencedream/PythonPakage/fraction%EF%BC%88%E5%88%86%E6%95%B0%EF%BC%89%E6%A8%A1%E5%9D%97.html" data-v-f51f088d><!--[-->包的应用<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f732b5d0 data-v-af5898d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-af5898d3><span class="text" data-v-af5898d3><!----><span data-v-af5898d3>SPSS</span><span class="vpi-chevron-down text-icon" data-v-af5898d3></span></span></button><div class="menu" data-v-af5898d3><div class="VPMenu" data-v-af5898d3 data-v-e42ed9b3><div class="items" data-v-e42ed9b3><!--[--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/silencedream/SPSSintro/%E5%89%8D%E8%A8%80.html" data-v-f51f088d><!--[-->SPSS入门<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f732b5d0 data-v-af5898d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-af5898d3><span class="text" data-v-af5898d3><!----><span data-v-af5898d3>计量模型</span><span class="vpi-chevron-down text-icon" data-v-af5898d3></span></span></button><div class="menu" data-v-af5898d3><div class="VPMenu" data-v-af5898d3 data-v-e42ed9b3><div class="items" data-v-e42ed9b3><!--[--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/silencedream/PanelData/%E4%BB%80%E4%B9%88%E6%98%AF%E9%9D%A2%E6%9D%BF%E6%95%B0%E6%8D%AE%EF%BC%9F.html" data-v-f51f088d><!--[-->面板数据<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/silencedream/Model/%E4%BA%8C%E5%80%BC%E9%80%89%E6%8B%A9%E6%A8%A1%E5%9E%8B%EF%BC%88logit%E4%B8%8Eprobit%EF%BC%89.html" data-v-f51f088d><!--[-->回归模型<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/silencedream/EndProblem/%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3%E5%86%85%E7%94%9F%E6%80%A7.html" data-v-f51f088d><!--[-->内生性处理<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/silencedream/MedMod/%E8%B0%83%E8%8A%82%E6%95%88%E5%BA%94%E4%B8%8EStata%E5%AE%9E%E7%8E%B0.html" data-v-f51f088d><!--[-->调节与中介<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f732b5d0 data-v-af5898d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-af5898d3><span class="text" data-v-af5898d3><!----><span data-v-af5898d3>其他内容</span><span class="vpi-chevron-down text-icon" data-v-af5898d3></span></span></button><div class="menu" data-v-af5898d3><div class="VPMenu" data-v-af5898d3 data-v-e42ed9b3><div class="items" data-v-e42ed9b3><!--[--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/silencedream/Question/%E4%BB%80%E4%B9%88%E5%8F%AB%E4%BC%B0%E8%AE%A1%E9%87%8F%E7%9A%84%E6%97%A0%E5%81%8F%E6%80%A7%EF%BC%9F%E4%B8%80%E8%87%B4%E6%80%A7%EF%BC%9F%E6%9C%89%E6%95%88%E6%80%A7%EF%BC%9F.html" data-v-f51f088d><!--[-->常见问题<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/silencedream/Writing/chatgpt%E5%AD%A6%E6%9C%AF%E4%BD%BF%E7%94%A8.html" data-v-f51f088d><!--[-->论文写作<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/silencedream/SelfIntro/_UTD24FT50_%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F.html" data-v-f51f088d><!--[-->个人分享<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/silencedream/Tools/%E5%A4%8D%E5%88%B6%E7%9F%A5%E7%BD%91HTML%E7%BD%91%E9%A1%B5%E4%B8%AD%E7%9A%84%E6%96%87%E6%9C%AC.html" data-v-f51f088d><!--[-->常用工具<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-844edcde data-v-283b26e9><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-283b26e9 data-v-7df97737 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-7df97737></span><span class="vpi-moon moon" data-v-7df97737></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-844edcde data-v-8e87c032 data-v-af5898d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-af5898d3><span class="vpi-more-horizontal icon" data-v-af5898d3></span></button><div class="menu" data-v-af5898d3><div class="VPMenu" data-v-af5898d3 data-v-e42ed9b3><!----><!--[--><!--[--><!----><div class="group" data-v-8e87c032><div class="item appearance" data-v-8e87c032><p class="label" data-v-8e87c032>Appearance</p><div class="appearance-action" data-v-8e87c032><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-8e87c032 data-v-7df97737 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-7df97737></span><span class="vpi-moon moon" data-v-7df97737></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-844edcde data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-844edcde><div class="divider-line" data-v-844edcde></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-883964e0><button data-v-883964e0>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" role="navigation" data-v-cb998dce data-v-269d7ea7><div class="content" data-v-269d7ea7><div class="outline-marker" data-v-269d7ea7></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-269d7ea7>On this page</div><ul class="VPDocOutlineItem root" data-v-269d7ea7 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _silencedream_EmpiricalStudy" data-v-e6f2a212><div><h1 id="第1讲-引言" tabindex="-1">第1讲 引言 <a class="header-anchor" href="#第1讲-引言" aria-label="Permalink to &quot;第1讲 引言&quot;">​</a></h1><h2 id="实证研究概述" tabindex="-1">实证研究概述 <a class="header-anchor" href="#实证研究概述" aria-label="Permalink to &quot;实证研究概述&quot;">​</a></h2><h3 id="什么是实证研究" tabindex="-1">什么是实证研究？ <a class="header-anchor" href="#什么是实证研究" aria-label="Permalink to &quot;什么是实证研究？&quot;">​</a></h3><p>实证研究是指通过实证方法收集和分析可观察现象和数据，以验证或否定某种理论、假设或假说的科学研究方法。实证研究旨在通过实证数据来支持或推翻各种理论、模型或假设，并从中获得新的知识或见解。</p><p>实证研究通常包括以下步骤：</p><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A[确定研究问题或假说] --&gt; B[收集和分析数据]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  B --&gt; C[在收集的数据中寻找模式,关联或因果关系]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  C --&gt; D[通过统计分析和其他方法评估数据]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  D --&gt; E[根据分析结果得出结论]</span></span></code></pre></div><h3 id="基本思想" tabindex="-1">基本思想 <a class="header-anchor" href="#基本思想" aria-label="Permalink to &quot;基本思想&quot;">​</a></h3><p>实证研究的基本思想是通过收集、分析和解释客观的实证数据，验证或推翻某种理论或假说。</p><h2 id="实际的例子" tabindex="-1">实际的例子 <a class="header-anchor" href="#实际的例子" aria-label="Permalink to &quot;实际的例子&quot;">​</a></h2><ul><li>提出假设</li></ul><blockquote><p>本文认为，信息不对称和代理冲突等问题使得许多企业内部薪酬结构不断偏离合理水平，并引发了高管与普通员工之间的超额薪酬差距1问题，加剧企业内部收入分配不平等。作为一种重要的外部监督治理机制，税收征管对企业发挥了显著的公司治理作用（曾亚敏和张俊生，2009）。在积极推进智慧税务建设的背景下，税收征管数字化建设能够进一步发挥数据要素的驱动作用，实现税务监管模式的变革，强化税收征管工作的监督作用，从而缓解信息不对称和代理冲突等问题引发的高管超额薪酬问题，最终有助于间接推动企业薪酬体系的完善。因此，本文预期，税收征管数字化能够有效地发挥公司治理作用从而抑制高管超额薪酬，使得企业内部薪酬差距更趋合理。</p><p>基于上述分析，本文提出：</p><p>假说1：税收征管数字化会显著缩小企业内部高管与普通员工之间的薪酬差距。</p></blockquote><ul><li>研究设计</li></ul><blockquote><p>为了检验前文的研究假说，本文利用金税三期工程的准自然实验，采用变时点DID的估计方法，识别税收征管数字化对企业内部薪酬差距的影响。具体实证模型构建如下：</p><p>$$\begin{matrix}gap_{it}=&amp;\alpha_{0}+\alpha_{1}gtp_{ct}+\alpha_{2}CV+\delta_{i}+\mu_{j}+\gamma_{c}+\theta_{t}+\varepsilon_{it}\end{matrix}$$</p><p>其中，gap代表企业内部薪酬差距。下标i、j、c、t分别表示企业、行业、省份、年份。gtp代表企业所在地区当年进行了金税三期工程试点，用于测度税收征管数字化，其系数α1表示税收征管数字化对企业内部薪酬差距的影响。CV代表控制变量集合。本文控制了省份固定效应（γc）、行业固定效应（μj）和企业固定效应（δi），以控制地区层面、行业层面和企业层面不随时间变化因素对实证结果的影响；还控制了年份固定效应（θt），以控制随时间变化因素对企业内部薪酬差距的影响。同时，本文在公司层面上聚类调整标准误。</p></blockquote><h2 id="研究方法的选择" tabindex="-1">研究方法的选择 <a class="header-anchor" href="#研究方法的选择" aria-label="Permalink to &quot;研究方法的选择&quot;">​</a></h2><ul><li>案例研究</li><li>QCA分析法</li><li>元分析</li><li>实验研究……</li></ul><p><strong>研究方法与研究内容的匹配</strong></p><h2 id="stata概述、菜单操作" tabindex="-1">Stata概述、菜单操作 <a class="header-anchor" href="#stata概述、菜单操作" aria-label="Permalink to &quot;Stata概述、菜单操作&quot;">​</a></h2><h3 id="stata-基础介绍" tabindex="-1">Stata 基础介绍 <a class="header-anchor" href="#stata-基础介绍" aria-label="Permalink to &quot;Stata 基础介绍&quot;">​</a></h3><h4 id="什么是stata" tabindex="-1">什么是Stata <a class="header-anchor" href="#什么是stata" aria-label="Permalink to &quot;什么是Stata&quot;">​</a></h4><p>Stata是一种<strong>统计软件</strong>，主要用于统计分析和绘图。它提供了一种广泛使用的、集成的环境，可以在一个界面中完成数据的读入、数据清理、数据分析和数据可视化等工作。Stata广泛应用于在<strong>经济学</strong>和政治学等社会科学领域中得到广泛使用。</p><h4 id="stata有何优势" tabindex="-1">Stata有何优势 <a class="header-anchor" href="#stata有何优势" aria-label="Permalink to &quot;Stata有何优势&quot;">​</a></h4><ul><li><p>适用于<strong>大规模数据分析</strong>：与Excel相比，Stata能够更好地处理大型数据集（速度快、稳定性高）</p></li><li><p><strong>统计分析</strong>功能强大：固定效应模型,DID。</p></li><li><p>可编程性：Stata具有高度的可编程性</p></li></ul><h4 id="为什么用stata" tabindex="-1">为什么用Stata？ <a class="header-anchor" href="#为什么用stata" aria-label="Permalink to &quot;为什么用Stata？&quot;">​</a></h4><ul><li>强大的数据管理功能；全面的统计分析功能；稳定的计算引擎；丰富的绘图功能；开放性和可扩展性</li><li>权威性：很多文献都用</li><li>学习材料：方便学习</li></ul><h3 id="stata软件介绍" tabindex="-1">Stata软件介绍 <a class="header-anchor" href="#stata软件介绍" aria-label="Permalink to &quot;Stata软件介绍&quot;">​</a></h3><h4 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h4><ul><li>Stata软件的安装和注册通常很简单，只需根据Stata官网的指示进行即可。 <ul><li>付费软件；学校正规渠道购买</li></ul></li></ul><h4 id="界面构成" tabindex="-1">界面构成 <a class="header-anchor" href="#界面构成" aria-label="Permalink to &quot;界面构成&quot;">​</a></h4><ul><li>命令窗口(Command window): 可以在这里输入命令进行数据操作和统计分析。</li><li>变量查看窗口(Variables window): 显示当前数据集中所有变量的名称和类型。</li><li>数据浏览窗口(Data browser window): 显示当前数据集的前几行和最后几行数据。</li><li>输出窗口(Output window): 显示数据操作和统计分析的结果。</li><li>统计分析菜单(Statistics menu): 包含常用的统计分析命令和选项。</li><li>工具栏(Toolbar): 提供快捷的数据操作和统计分析功能。</li></ul><h4 id="ps-如何设置中文" tabindex="-1">PS：如何设置中文 <a class="header-anchor" href="#ps-如何设置中文" aria-label="Permalink to &quot;PS：如何设置中文&quot;">​</a></h4><ul><li>设置中文;Stata15之后能够使用中文【编辑--&gt;首选项--&gt;用户界面语言】</li></ul><h4 id="学习" tabindex="-1">学习 <a class="header-anchor" href="#学习" aria-label="Permalink to &quot;学习&quot;">​</a></h4><ul><li>从2到N：用特殊的情况理解原理，再在论文实证中做大范围</li></ul><h3 id="数据简介" tabindex="-1">数据简介 <a class="header-anchor" href="#数据简介" aria-label="Permalink to &quot;数据简介&quot;">​</a></h3><h4 id="认识数据-数据的基本类型" tabindex="-1">认识数据：数据的基本类型 <a class="header-anchor" href="#认识数据-数据的基本类型" aria-label="Permalink to &quot;认识数据：数据的基本类型&quot;">​</a></h4><p>Stata 常用的数据类型主要有三类：</p><ul><li>数值（数字）</li></ul><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">help</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> datatype</span></span></code></pre></div><ul><li>字符（文本格式） <ul><li>字符串（string） <strong>str</strong></li><li>&quot;我是silencedream&quot; “平安银行” 等都能。 注意 ： ”123“</li></ul></li><li>日期 <ul><li>两个日期之间的天数 2023 -05 -13</li></ul></li></ul><h4 id="数据结构" tabindex="-1">数据结构 <a class="header-anchor" href="#数据结构" aria-label="Permalink to &quot;数据结构&quot;">​</a></h4><p><strong>行</strong>表示样本；<strong>列</strong>表示变量【特征】</p><table><thead><tr><th></th><th>姓名</th><th>score1</th><th>score2</th></tr></thead><tbody><tr><td>1</td><td>A</td><td>11</td><td>11</td></tr><tr><td>2</td><td>B</td><td>22</td><td>22</td></tr><tr><td>3</td><td>C</td><td>33</td><td>33</td></tr></tbody></table><h2 id="stata命令与帮助文件" tabindex="-1">Stata命令与帮助文件 <a class="header-anchor" href="#stata命令与帮助文件" aria-label="Permalink to &quot;Stata命令与帮助文件&quot;">​</a></h2><h3 id="stata语法介绍" tabindex="-1">Stata语法介绍 <a class="header-anchor" href="#stata语法介绍" aria-label="Permalink to &quot;Stata语法介绍&quot;">​</a></h3><ul><li><p>语法：交流的规则</p></li><li><p>学一门新的语言：做一个翻译</p><ul><li>加总两列数据【score1】【score2】</li><li>generate score3 = score1 + score2</li></ul></li><li><p>ChatGPT</p><ul><li>1 + 1 = 2</li></ul></li></ul><h2 id="常见的学习资料" tabindex="-1">常见的学习资料 <a class="header-anchor" href="#常见的学习资料" aria-label="Permalink to &quot;常见的学习资料&quot;">​</a></h2><h3 id="help命令-帮助文档" tabindex="-1">help命令（帮助文档） <a class="header-anchor" href="#help命令-帮助文档" aria-label="Permalink to &quot;help命令（帮助文档）&quot;">​</a></h3><ul><li>完整性：官方文档包含了Stata软件中的所有命令和函数</li><li>及时性：Stata的官方文档会及时更新</li><li>规范性：Stata的官方文档采用了一致的格式和规范</li></ul><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">help</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> drop</span></span></code></pre></div><h3 id="常见学习资料" tabindex="-1">常见学习资料 <a class="header-anchor" href="#常见学习资料" aria-label="Permalink to &quot;常见学习资料&quot;">​</a></h3><ul><li>stata官网：<a href="https://www.stata.com/" target="_blank" rel="noreferrer">https://www.stata.com/</a></li><li>连享会 ：<a href="https://lianxh.cn/" target="_blank" rel="noreferrer">https://lianxh.cn/</a></li><li>经管之家： <a href="https://bbs.pinggu.org/" target="_blank" rel="noreferrer">https://bbs.pinggu.org/</a></li><li>中国工业经济： <a href="http://ciejournal.ajcass.org/" target="_blank" rel="noreferrer">http://ciejournal.ajcass.org/</a></li></ul><h1 id="stata程序与编程" tabindex="-1">Stata程序与编程 <a class="header-anchor" href="#stata程序与编程" aria-label="Permalink to &quot;Stata程序与编程&quot;">​</a></h1><h2 id="do文件创建与优化" tabindex="-1">do文件创建与优化 <a class="header-anchor" href="#do文件创建与优化" aria-label="Permalink to &quot;do文件创建与优化&quot;">​</a></h2><h3 id="dofile" tabindex="-1">dofile <a class="header-anchor" href="#dofile" aria-label="Permalink to &quot;dofile&quot;">​</a></h3><p>包含Stata命令的文本文件，可以通过运行它来自动执行一系列命令。</p><ul><li><p>可以方便地记录和保存数据分析的过程和结果，避免手动操作的失误。</p></li><li><p>可以自动化地重复分析过程，节省时间和减少错误。</p></li><li><p>可以通过修改和编辑do-file来更新和改进分析过程，提高效率和准确性。</p></li><li><p>可以与他人共享和交流分析过程，促进协作和提高透明度。</p></li></ul><h3 id="在dofile里多写注释" tabindex="-1">在dofile里多写注释 <a class="header-anchor" href="#在dofile里多写注释" aria-label="Permalink to &quot;在dofile里多写注释&quot;">​</a></h3><ol><li>提高代码的可读性：（对他人而言）良好的注释可以让其他人更快地理解你的代码，提高合作效率。</li><li>方便代码的维护和修改：（对自己而言）理解自己写的代码（有可能中途打断）。</li><li>提高代码的可复制性：通过注释记录下每一步操作和思路，可以让其他人更容易复制你的代码并在其自己的数据集上运行，从而保证数据分析的可复制性。</li></ol><ul><li>整行注释</li></ul><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*  希望你能学好stata</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 希望你能学好stata</span></span></code></pre></div><ul><li>行末注释</li></ul><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">sysuse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> auto,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">clear</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 调用自带数据</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> price rep78 weight  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//进行线性回归分析</span></span></code></pre></div><ul><li>多行注释</li></ul><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/*sysuse auto,clear</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">reg price rep78 weight  进行回归分析 */</span></span></code></pre></div><h2 id="_2-2-局域暂元与全局暂元" tabindex="-1">2.2 局域暂元与全局暂元 <a class="header-anchor" href="#_2-2-局域暂元与全局暂元" aria-label="Permalink to &quot;2.2 局域暂元与全局暂元&quot;">​</a></h2><h2 id="global与local" tabindex="-1">Global与Local <a class="header-anchor" href="#global与local" aria-label="Permalink to &quot;Global与Local&quot;">​</a></h2><p>在Stata中，global和local都是用来创建和使用宏变量的命令。宏变量是可以存储数据或命令，并在程序的不同部分使用的一种特殊类型的变量。它们非常有用，可以帮助减少代码的冗余并提高代码的可读性和可维护性。</p><ul><li>Global变量</li></ul><p>使用global命令可以创建全局宏变量，它们可以在Stata会话的所有部分使用。</p><ul><li>Local变量</li></ul><p>使用local命令可以创建局部宏变量，它们只在当前程序中使用。</p><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">global</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> control_1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;13344&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">display</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> $</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">control_1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">local</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> control_2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;1234&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">display</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">control_2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*[1]虞义华,赵奇锋,鞠晓生.发明家高管与企业创新[J].中国工业经济,2018,No.360(03):136-154.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">global</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> firmcontrol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;L1.ln_assets L1.ln_firmage L1.ln_fixedpp L1.ln_salespp L1.leverage L1.cashassets_ratio L1.MB_ratio L1.salesgrowth L1.ROA L1.stockreturn L1.stockvolatility L1.herfindahl L1.herfindahl_sq&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xtivreg2 ln_patentdes_grant  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firmcontrol</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  ///</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  (</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">L1.preceo_inventor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> L2.pre_homelandpp preceo_inventor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> ///</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  , fe first</span></span></code></pre></div><h2 id="stata条件语句" tabindex="-1">Stata条件语句 <a class="header-anchor" href="#stata条件语句" aria-label="Permalink to &quot;Stata条件语句&quot;">​</a></h2><p>在 Stata 中，条件语句用于根据某个条件执行不同的操作。Stata 提供了几种条件语句的类型，包括 <code>if</code>、<code>else</code>、<code>elseif</code> 和 <code>while</code>。</p><ol><li><code>if</code> 语句：<code>if</code> 语句用于执行基于某个条件的操作。语法如下：</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>stataCopy codeif condition {</span></span>
<span class="line"><span>    commands</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>其中，<code>condition</code> 是一个逻辑条件，如果条件成立，则执行 <code>commands</code> 中的操作。</p><p>例如，下面的代码根据变量 <code>x</code> 的值是否大于 0，执行不同的操作：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>stataCopy codeif x &gt; 0 {</span></span>
<span class="line"><span>    display &quot;x is positive&quot;</span></span>
<span class="line"><span>}</span></span></code></pre></div><ol><li><code>else</code> 语句：<code>else</code> 语句用于在条件不满足时执行备选操作。语法如下：</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>stataCopy codeif condition {</span></span>
<span class="line"><span>    commands</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>else {</span></span>
<span class="line"><span>    commands</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>如果 <code>condition</code> 成立，则执行第一组 <code>commands</code>；否则，执行第二组 <code>commands</code>。</p><p>例如，下面的代码根据变量 <code>x</code> 的值是否大于 0，输出不同的消息：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>stataCopy codeif x &gt; 0 {</span></span>
<span class="line"><span>    display &quot;x is positive&quot;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>else {</span></span>
<span class="line"><span>    display &quot;x is non-positive&quot;</span></span>
<span class="line"><span>}</span></span></code></pre></div><ol><li><code>elseif</code> 语句：<code>elseif</code> 语句用于在多个条件之间进行选择。可以使用多个 <code>elseif</code> 来测试多个条件，但只有满足第一个条件的分支将被执行。语法如下：</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>stataCopy codeif condition1 {</span></span>
<span class="line"><span>    commands</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>elseif condition2 {</span></span>
<span class="line"><span>    commands</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>else {</span></span>
<span class="line"><span>    commands</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>如果 <code>condition1</code> 成立，则执行第一组 <code>commands</code>；否则，如果 <code>condition2</code> 成立，则执行第二组 <code>commands</code>；否则，执行最后一组 <code>commands</code>。</p><p>例如，下面的代码根据变量 <code>x</code> 的值输出不同的消息：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>stataCopy codeif x &gt; 0 {</span></span>
<span class="line"><span>    display &quot;x is positive&quot;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>elseif x &lt; 0 {</span></span>
<span class="line"><span>    display &quot;x is negative&quot;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>else {</span></span>
<span class="line"><span>    display &quot;x is zero&quot;</span></span>
<span class="line"><span>}</span></span></code></pre></div><ol><li><code>while</code> 语句：<code>while</code> 语句用于在条件成立时重复执行一组命令。语法如下：</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>stataCopy codewhile condition {</span></span>
<span class="line"><span>    commands</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>只要 <code>condition</code> 成立，就会重复执行 <code>commands</code> 中的操作。</p><p>例如，下面的代码计算变量 <code>x</code> 的阶乘：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>stataCopy codelocal result = 1</span></span>
<span class="line"><span>local i = 1</span></span>
<span class="line"><span></span></span>
<span class="line"><span>while `i&#39; &lt;= `x&#39; {</span></span>
<span class="line"><span>    local result = `result&#39; * `i&#39;</span></span>
<span class="line"><span>    local i = `i&#39; + 1</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>display &quot;Factorial of x: &quot; `result&#39;</span></span></code></pre></div><p>这些是 Stata 中条件语句的基本用法。根据具体的需求，你可以使用这些语句来实现复杂的条件逻辑和控制流程。</p><h2 id="_2-4-stata循环语句" tabindex="-1">2.4 Stata循环语句 <a class="header-anchor" href="#_2-4-stata循环语句" aria-label="Permalink to &quot;2.4 Stata循环语句&quot;">​</a></h2><p>在 Stata 中，循环语句用于重复执行一组命令，以便在数据集中进行迭代或执行其他重复性任务。Stata 提供了几种类型的循环语句，包括 <code>forvalues</code>、<code>foreach</code> 和 <code>while</code>。</p><ol><li><code>forvalues</code> 循环：<code>forvalues</code> 循环用于按照指定的数值范围进行迭代。语法如下：</li></ol><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">forvalues</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> varname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> startval to endval </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    commands</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">}</span></span></code></pre></div><p>其中，<code>varname</code> 是一个临时变量名称，用于表示当前循环的迭代值；<code>startval</code> 是迭代的起始值；<code>endval</code> 是迭代的结束值（包括在范围内）。在每次迭代时，<code>varname</code> 的值将自动更新，并执行相应的命令。</p><p>例如，下面的代码计算变量 <code>x</code> 的平方并显示结果：</p><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">forvalues</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> to </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    local</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sq</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    display</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39; squared is: &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sq</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">}</span></span></code></pre></div><ol start="2"><li><code>foreach</code> 循环：<code>foreach</code> 循环用于按照指定的元素列表进行迭代。语法如下：</li></ol><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">foreach</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> varname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of varlist</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    commands</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">}</span></span></code></pre></div><p>其中，<code>varname</code> 是一个临时变量名称，用于表示当前循环的迭代元素；<code>varlist</code> 是一个变量列表或变量名称模式，指定要迭代的元素。在每次迭代时，<code>varname</code> 的值将自动更新，并执行相应的命令。</p><p>例如，下面的代码将对变量列表 <code>var1 var2 var3</code> 中的每个变量执行一些操作：</p><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">foreach</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> var</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of varlist</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> var1 var2 var3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    summarize</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">var</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">}</span></span></code></pre></div><ol start="3"><li><code>while</code> 循环：<code>while</code> 循环用于在条件成立时重复执行一组命令。语法如下：</li></ol><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> condition </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    commands</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">}</span></span></code></pre></div><p>只要 <code>condition</code> 成立，就会重复执行 <code>commands</code> 中的操作。在每次迭代之后，应更新 <code>condition</code> 的值，以避免无限循环。</p><p>例如，下面的代码计算变量 <code>x</code> 的阶乘：</p><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">local</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">local</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">while</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    local</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">result</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    local</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">display</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Factorial of x: &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">result</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span></code></pre></div><p>这些是 Stata 中循环语句的基本用法。通过使用循环语句，你可以自动化执行重复性任务，并对数据集中的每个观测值或变量执行相同的操作。根据具体的需求，你可以使用这些循环语句来实现更复杂的迭代逻辑。</p><h1 id="第3讲-数据管理与可视化" tabindex="-1">第3讲 数据管理与可视化** <a class="header-anchor" href="#第3讲-数据管理与可视化" aria-label="Permalink to &quot;第3讲 数据管理与可视化**&quot;">​</a></h1><h2 id="数据处理流程大纲" tabindex="-1">数据处理流程大纲 <a class="header-anchor" href="#数据处理流程大纲" aria-label="Permalink to &quot;数据处理流程大纲&quot;">​</a></h2><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph LR;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    A[数据源] --&gt; B[数据导入];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B --&gt; C[数据合并];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    C --&gt; D[数据清洗];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    D --&gt; E[数据计算];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    E --&gt; F[数据分析];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    F --&gt; G[结果展示];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style A fill:#f9f,stroke:#333,stroke-width:2px;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style B fill:#fc9,stroke:#333,stroke-width:2px;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style C fill:#9f9,stroke:#333,stroke-width:2px;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style D fill:#966,stroke:#333,stroke-width:2px;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style E fill:#99f,stroke:#333,stroke-width:2px;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style F fill:#f66,stroke:#333,stroke-width:2px;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style G fill:#f9f,stroke:#333,stroke-width:2px;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    subgraph 数据源</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    A</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    subgraph 数据处理</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    C</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    D</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    E</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    subgraph 分析结果</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    F</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    G</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    end</span></span></code></pre></div><ul><li><p>数据收集：数据来源</p></li><li><p>数据导入：如何将收集到的不同格式数据导入stata进行处理( import / use / export / save)</p></li><li><p>数据合并：如果数据来源于不同的数据库，则需要合并数据 (merge / append)</p></li><li><p>数据清洗</p><ul><li>去掉重复值与观测数据 (duplicates )</li><li>保留样本 ( keep / drop )</li><li>计算变量 (gen / egen / bysort)</li><li>数据变量和标签 ( label )</li><li>缩尾截尾 ( winsor2)</li><li>global local</li></ul></li><li><p>数据分析</p><ul><li>描述、相关性统计分析（summarize, pwcorr）</li><li>回归分析 (regression, logit\probit, poisson, tobit)</li><li>内生性处理 ()</li></ul></li><li><p>结果解释和报告</p><ul><li>导出结果(sum2docx , corr2docx, reg2docx)</li></ul></li></ul><h2 id="变量转换" tabindex="-1">变量转换 <a class="header-anchor" href="#变量转换" aria-label="Permalink to &quot;变量转换&quot;">​</a></h2><h3 id="变量类型" tabindex="-1">变量类型 <a class="header-anchor" href="#变量类型" aria-label="Permalink to &quot;变量类型&quot;">​</a></h3><h3 id="认识数据-数据的基本类型-1" tabindex="-1">认识数据：数据的基本类型 <a class="header-anchor" href="#认识数据-数据的基本类型-1" aria-label="Permalink to &quot;认识数据：数据的基本类型&quot;">​</a></h3><p>Stata 常用的数据类型主要有三类：</p><ul><li>数值（数字）</li></ul><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">help</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> datatype</span></span></code></pre></div><ul><li>字符（文本格式） <ul><li>字符串（string） <strong>str</strong></li><li>&quot;我是silencedream&quot; “平安银行” 等都能。 注意 ： ”123“</li></ul></li><li>日期 <ul><li>两个日期之间的天数 2023 -05 -13</li></ul></li></ul><h3 id="数据结构-1" tabindex="-1">数据结构 <a class="header-anchor" href="#数据结构-1" aria-label="Permalink to &quot;数据结构&quot;">​</a></h3><p><strong>行</strong>表示样本；<strong>列</strong>表示变量【特征】</p><table><thead><tr><th></th><th>姓名</th><th>score1</th><th>score2</th></tr></thead><tbody><tr><td>1</td><td>A</td><td>11</td><td>11</td></tr><tr><td>2</td><td>B</td><td>22</td><td>22</td></tr><tr><td>3</td><td>C</td><td>33</td><td>33</td></tr></tbody></table><h2 id="处理缺失值-异常值-arima线性插值填补等" tabindex="-1">处理缺失值&amp;异常值：ARIMA线性插值填补等 <a class="header-anchor" href="#处理缺失值-异常值-arima线性插值填补等" aria-label="Permalink to &quot;处理缺失值&amp;异常值：ARIMA线性插值填补等&quot;">​</a></h2><h3 id="缺失值" tabindex="-1">缺失值 <a class="header-anchor" href="#缺失值" aria-label="Permalink to &quot;缺失值&quot;">​</a></h3><p>在 Stata 中处理缺失值和异常值有多种方法，其中包括使用 ARIMA 模型进行线性插值填补。下面我将介绍一些常用的方法。</p><ol><li>删除包含缺失值或异常值的观测：这是最简单的方法之一。你可以使用 <code>drop</code> 命令删除包含缺失值或异常值的观测。例如，如果你的数据集中有一个变量名为 &quot;x&quot;，你可以使用以下命令删除具有缺失值或异常值的观测：</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>drop if missing(x) | x &lt; lower_threshold | x &gt; upper_threshold</span></span></code></pre></div><p>其中，<code>lower_threshold</code> 和 <code>upper_threshold</code> 分别是你设定的下限和上限。</p><ol start="2"><li>插值填补缺失值：Stata 提供了多种方法来插值填补缺失值。其中之一是使用 <code>ipolate</code> 命令，它可以使用线性插值或多项式插值方法填补缺失值。例如，要对变量 &quot;x&quot; 进行线性插值填补，你可以使用以下命令：</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ipolate x, gen(x_interp) // 生成一个新变量 x_interp，其中包含填补的值</span></span></code></pre></div><p>你还可以通过在 <code>ipolate</code> 命令中添加 <code>polynomial</code> 选项来进行多项式插值。更多关于 <code>ipolate</code> 命令的详细信息可以通过 <code>help ipolate</code> 查看。</p><ol start="3"><li>使用 ARIMA 模型进行线性插值：如果你的数据存在时间序列结构，你可以使用 ARIMA 模型进行线性插值填补。Stata 提供了 <code>arima</code> 命令用于估计 ARIMA 模型。你可以使用已知的观测值来估计模型，并使用估计的模型对缺失值进行插值。以下是一个示例命令：</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>arima x, arima(1,0,0) // 估计 AR(1) 模型</span></span>
<span class="line"><span>predict x_interp, y // 对缺失值进行插值，生成一个新变量 x_interp</span></span></code></pre></div><p>在上述命令中，使用 <code>arima(1,0,0)</code> 来估计一个 AR(1) 模型。<code>predict</code> 命令用于生成插值值，并将其存储在新变量 <code>x_interp</code> 中。</p><p>这些方法只是处理缺失值和异常值的一部分技术，Stata 提供了更多功能和命令用于数据处理。你可以参考 Stata 的文档和帮助文件，以获取更详细的信息和使用示例。</p><h3 id="缩尾截尾" tabindex="-1">缩尾截尾 <a class="header-anchor" href="#缩尾截尾" aria-label="Permalink to &quot;缩尾截尾&quot;">​</a></h3><p><strong>作用：去掉异常值的影响。</strong></p><p>缩尾：将大于99%分位数的取值，<strong>替换为99%分位数取值</strong>；将小于1%分位数的取值，<strong>替换为1%分位数取值</strong>。</p><p>截尾：将大于99%分位数或小于1%分位数的取值，<strong>替换为缺失值</strong>。</p><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">** 安装 winsor2</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ssc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> install winsor2, replace</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">help</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> winsor2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 缩尾</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">sysuse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nlsw88, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">clear</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">winsor2 wage, replace </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cuts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 99</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* replace wage=1.930993 if wage&lt;1.930993</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* replace wage=38.70926 if wage&gt;38.70926</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*截尾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">winsor2 wage, replace </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cuts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 99</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">trim</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* replace wage=. if wage&lt;1.930993</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* replace wage=. if wage&gt;38.70926</span></span></code></pre></div><p>2.3 实证指标计算：加减乘除、变量转换、均值、求和、滞后期变量、日期变量的处理</p><h2 id="数字类型计算" tabindex="-1">数字类型计算 <a class="header-anchor" href="#数字类型计算" aria-label="Permalink to &quot;数字类型计算&quot;">​</a></h2><p>加,减,乘,除，幂(列与列的运算)</p><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A[gen对列进行操作]--- B[加]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A --- C[减]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A --- D[乘]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A --- E[除]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A --- F[幂]</span></span></code></pre></div><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">help</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> generate</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gen_and_egen.dta,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">clear</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 加</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score3</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 减</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score4 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 乘</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score5 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score5</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 除</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score6 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score6</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 幂</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score7 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score7</span></span></code></pre></div><p>常用<code>gen</code>数据函数</p><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A[gen对列进行操作]--- B[指数函数exp]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A --- C[自然对数ln]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A --- D[以10为底的对数函数log10]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A --- E[平方根sqrt]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A --- F[多列取最大值max]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A --- G[多列取最小值min]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A --- H[取余数mod]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A --- BB[累计求和sum]</span></span></code></pre></div><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* exp(x)--指数函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score8 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> exp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(score2)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score8</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* ln(x)--自然对数函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score9 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ln</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(score2)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score9</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* log10(x)--以10为底的对数函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score10 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> log10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(score2)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score10</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* sqrt(x)--求x的平方根，x为非负数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score11 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sqrt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(score2)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score11</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* round(x)--返回最接近x的整数。(把x四舍五入到个位）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score12 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> round</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(score2)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score12</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* mod(x,y)--求x除以y的余数。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score13 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(score1,score2)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score13</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* max(x1,x2,x3......xn) -- 求x1，x2......xn中最大值</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score14 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(score1,score2)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score14</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* min(x1,x2,x3......xn) -- 求x1，x2......xn中最小值</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score15 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> min</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(score1,score2)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score15</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* sum(x)在generate命令和egen命令中的效果是不一样的。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score16 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(score2)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score16</span></span></code></pre></div><p>求变量（列）的计算函数<code>egen</code></p><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A[egen对列进行操作]--- B[均值mean]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A --- C[中位数median]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A --- D[标准差sd]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A --- E[标准化std]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A --- F[最大值max]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A --- G[最小值min]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A --- H[sum求和total]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A --- BB[统计非缺失观测值数量count]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A --- CC[group生成对应数字]</span></span></code></pre></div><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">help</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> egen</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score17 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(score2)     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 创建新变量 score17，值为 score2 的均值</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score17     </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score18 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(score2)       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 创建新变量 score18，值为 score2 的标准差</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score18     </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score19 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(score2)      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 创建新变量 score19，值为 score2 的标准化结果</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score19     </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score20 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(score2)     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 创建新变量 score20，值为 score2 的最大值</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score20     </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score21 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> min</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(score2)     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 创建新变量 score21，值为 score2 的最小值</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score21     </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score22 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> total</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(score2)    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 创建新变量 score22，值为 score2 的总和</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score22     </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score23 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(score2)    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 创建新变量 score23，值为 score2 的总和</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score23     </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score24 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(score2)   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 创建新变量 score24，值为 score2 的非缺失观测数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score24    </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score25 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> median</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(score2)   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 创建新变量 score25，值为 score2 的中位数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> score1 score2 score25    </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name)   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 创建新变量 name_id , 根据name对应变量成数字</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name name_id</span></span></code></pre></div><h2 id="文本类型计算" tabindex="-1">文本类型计算 <a class="header-anchor" href="#文本类型计算" aria-label="Permalink to &quot;文本类型计算&quot;">​</a></h2><p>体现文本类型的处理</p><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> stringtest.dta,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">clear</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 截取文本 u sub str</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">dis</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> usubstr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;上海市&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> usubstr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(province,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> province test1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 分割 split</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> split1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> split1 , </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x_)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> split1 x_1  x_2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 替换文本</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">dis</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> usubinstr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;我就是我，那不一样的烟火&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;我&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;X&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">dis</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> usubinstr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;我就是我，那不一样的我&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;我&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;X&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">dis</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> usubinstr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;我就是我，我就是那不一样的我&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;我&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;X&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> usubinstr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(province,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;省&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 去掉空格</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 处理空格 str [i/l/r] trim</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">dis</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	stritrim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;我   就是我&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">dis</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	strltrim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;     我就是我    ————————&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">dis</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	strrtrim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;我就是我  &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 匹配 正则表达式</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">dis</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> strmatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;四川省&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*省&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">dis</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> strmatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;四川省&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*市&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  strmatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(province,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*市&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h2 id="分组计算" tabindex="-1">分组计算 <a class="header-anchor" href="#分组计算" aria-label="Permalink to &quot;分组计算&quot;">​</a></h2><p>按照分组变量进行计算：</p><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bysort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.dta, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">clear</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // 从数据文件byosrt.dta中加载数据</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // 显示数据集中的数据</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">help</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bysort</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // 显示关于bysort命令的帮助信息</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">help</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> egenerate   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 显示关于egen命令的帮助信息</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bysort</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> class_mean </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(score)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 对变量score进行分组处理，按照class变量分组，计算每组的平均值，并新建一个变量class_mean存储平均值结果</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bysort</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gender: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> class_mean1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(score)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 对变量score进行分组处理，按照class和gender变量分组，计算每组的平均值，并新建一个变量class_mean1存储平均值结果</span></span></code></pre></div><p>分组计算的应用场景：</p><p>分企业计算、分行业计算、按照行业、年度计算变量</p><ul><li>计算各年度各行业（按证监会分类为21个行业）的某一变量的均值和中位数，</li></ul><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* industry 行业变量</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* year 时间变量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bysort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> industry year : </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mean_renenue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(revenue)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bysort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> industry year : </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mean_renenue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(revenue) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 求和</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bysort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> industry year : </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mean_renenue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> total</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(revenue) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 求总和</span></span></code></pre></div><h2 id="数据标签" tabindex="-1">数据标签 <a class="header-anchor" href="#数据标签" aria-label="Permalink to &quot;数据标签&quot;">​</a></h2><p>作用：</p><ul><li>对变量含义，变量值进行说明，方便合作</li></ul><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> drop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.dta,clear</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">help</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> label </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//  帮助文档</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 变量标签</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> variable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;姓名&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 值标签</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> classnum </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(class)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">sort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> classnum</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">drop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> class</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 定义myLabel标签，0对应的标签为&quot;US&quot;，1对应的标签为&quot;Not US&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> define</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> myLabel </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;A&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;B&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 将标签myLabel应用到变量foreign上</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> values</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> classnum myLabel</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">tabulate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> classnum</span></span></code></pre></div><h3 id="日期类型计算" tabindex="-1">日期类型计算 <a class="header-anchor" href="#日期类型计算" aria-label="Permalink to &quot;日期类型计算&quot;">​</a></h3><p>比较两个日期之间的差距。</p><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 提取</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> date.dta, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">clear</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 使用数据集 date.dta</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> year </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> year</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(start) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 生成一个变量 year，表示 date 中的年份</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start year in </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> halfyear </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> halfyear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(start) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 生成一个变量 halfyear，表示 date 中的半年份</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start halfyear in </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> month </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> month</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(start) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 生成一个变量 month，表示 date 中的月份</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start month in </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> day </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> day</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(start) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 生成一个变量 day，表示 date 中的日期</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start day in </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> doy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> doy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(start) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 生成一个变量 doy，表示 date 中的一年中的第几天</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start doy in </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> quarter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> quarter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(start) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 生成一个变量 quarter，表示 date 中的季度</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start quarter in </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> week </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> week</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(start) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 生成一个变量 week，表示 date 中的一年中的第几周</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start week in </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(start) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 生成一个变量 dow，表示 date 中的星期几</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start dow  in </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gap </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> end</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 生成一个变量gap，表示start end 两个日期之间的差异</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gap  in </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 调整日期格式</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">help</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">td</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start  in </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tc</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start  in </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span></span></code></pre></div><p>2.4 纵横向数据合并</p><h2 id="数据合并" tabindex="-1">数据合并 <a class="header-anchor" href="#数据合并" aria-label="Permalink to &quot;数据合并&quot;">​</a></h2><ol><li>使用<code>merge</code>命令合并数据集【给样本添加新的变量】横向合并</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>use data1.dta,clear</span></span>
<span class="line"><span>merge 1:1 name using dataset2</span></span></code></pre></div><table><thead><tr><th>name</th><th>age</th></tr></thead><tbody><tr><td>Roberta</td><td>39</td></tr><tr><td>Oliver</td><td>25</td></tr></tbody></table><table><thead><tr><th>name</th><th>Gender</th></tr></thead><tbody><tr><td>Roberta</td><td>F</td></tr><tr><td>Oliver</td><td>M</td></tr></tbody></table><table><thead><tr><th style="text-align:center;">name</th><th style="text-align:center;">age</th><th style="text-align:center;">Gender</th></tr></thead><tbody><tr><td style="text-align:center;">Roberta</td><td style="text-align:center;">39</td><td style="text-align:center;">F</td></tr><tr><td style="text-align:center;">Oliver</td><td style="text-align:center;">25</td><td style="text-align:center;">M</td></tr></tbody></table><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data1.dta,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">clear</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">merge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name using dataset2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data2.dta,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">clear</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">merge</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:m name using dataset1</span></span></code></pre></div><table><thead><tr><th>name</th><th>time</th><th>weight</th></tr></thead><tbody><tr><td>Roberta</td><td>2001</td><td>51</td></tr><tr><td>Oliver</td><td>2001</td><td>52</td></tr><tr><td>Roberta</td><td>2002</td><td>54</td></tr><tr><td>Oliver</td><td>2002</td><td>56</td></tr></tbody></table><table><thead><tr><th>name</th><th>Gender</th></tr></thead><tbody><tr><td>Roberta</td><td>F</td></tr><tr><td>Oliver</td><td>M</td></tr></tbody></table><table><thead><tr><th style="text-align:center;">name</th><th style="text-align:center;">time</th><th style="text-align:center;">weight</th><th style="text-align:center;">Gender</th></tr></thead><tbody><tr><td style="text-align:center;">Roberta</td><td style="text-align:center;">2001</td><td style="text-align:center;">51</td><td style="text-align:center;">F</td></tr><tr><td style="text-align:center;">Roberta</td><td style="text-align:center;">2002</td><td style="text-align:center;">54</td><td style="text-align:center;">F</td></tr><tr><td style="text-align:center;">Oliver</td><td style="text-align:center;">2001</td><td style="text-align:center;">52</td><td style="text-align:center;">M</td></tr><tr><td style="text-align:center;">Oliver</td><td style="text-align:center;">2002</td><td style="text-align:center;">56</td><td style="text-align:center;">M</td></tr></tbody></table><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data1.dta,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">clear</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">merge</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name time using dataset2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* &quot;Roberta&quot; + &quot;2001&quot;   //    &quot;Roberta2001&quot;</span></span></code></pre></div><table><thead><tr><th>name</th><th>time</th><th>weight</th></tr></thead><tbody><tr><td>Roberta</td><td>2001</td><td>51</td></tr><tr><td>Oliver</td><td>2001</td><td>52</td></tr><tr><td>Roberta</td><td>2002</td><td>54</td></tr><tr><td>Oliver</td><td>2002</td><td>56</td></tr></tbody></table><table><thead><tr><th>name</th><th>time</th><th>job</th></tr></thead><tbody><tr><td>Roberta</td><td>2001</td><td>Y</td></tr><tr><td>Oliver</td><td>2001</td><td>N</td></tr><tr><td>Roberta</td><td>2002</td><td>Y</td></tr><tr><td>Oliver</td><td>2002</td><td>Y</td></tr></tbody></table><ol start="2"><li>使用<code>append</code>命令合并数据集【补充样本数量】纵向合并</li></ol><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data1.dta,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">clear</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> using dataset2</span></span></code></pre></div><table><thead><tr><th>name</th><th>age</th></tr></thead><tbody><tr><td>Roberta</td><td>39</td></tr></tbody></table><table><thead><tr><th>name</th><th>age</th></tr></thead><tbody><tr><td>Oliver</td><td>25</td></tr></tbody></table><table><thead><tr><th style="text-align:center;">name</th><th style="text-align:center;">age</th></tr></thead><tbody><tr><td style="text-align:center;">Roberta</td><td style="text-align:center;">39</td></tr><tr><td style="text-align:center;">Oliver</td><td style="text-align:center;">25</td></tr></tbody></table><h2 id="排序" tabindex="-1">排序 <a class="header-anchor" href="#排序" aria-label="Permalink to &quot;排序&quot;">​</a></h2><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> testdata2.dta, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">clear</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 加载名为testdata2.dta的数据集并清空当前数据</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">sort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> age  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 按照变量age对数据进行升序排序（从小到大）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">sort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> age grade1  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 按照变量age对数据进行升序（从小到大）排序，如果age相同，按照变量grade1进行降序（从大到小）排序</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gsort</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">age  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 按照变量age对数据进行降序（从大到小）排序</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gsort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">grade1  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 按照变量age进行升序（从小到大）排序，如果age相同，按照变量grade1进行降序（从大到小）排序</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">list</span></span></code></pre></div><p>2.5 描述性统计及论文表格输出：均值，中位数，标准差，分位数等</p><p>2.6 相关性矩阵及论文表格输出</p><p>2.7 数据可视化：散点图，柱状图，箱线图、双变量趋势图等</p><p>2.8 Wind数据转换为Stata面板数据</p><p>2.9 指标计算 ：全要素生产率（LP、OP、OLS等）/融资约束指标（SA、KZ）</p><p>【不知道能否换为其他常见的变量，比如行业集中度什么的。这虽然会，但是可能讲的不太好】</p><h1 id="回归模型及解释" tabindex="-1">回归模型及解释 <a class="header-anchor" href="#回归模型及解释" aria-label="Permalink to &quot;回归模型及解释&quot;">​</a></h1><h2 id="检验假设" tabindex="-1">检验假设 <a class="header-anchor" href="#检验假设" aria-label="Permalink to &quot;检验假设&quot;">​</a></h2><p>假设1： A会影响B</p><p>检验两个变量之间的关系【回归模型】</p><p>$$y = \beta_1 x_1 + \beta_2 x_2 + \beta_3 x_3 + \mu$$</p><h2 id="普通最小二乘法-ols" tabindex="-1">普通最小二乘法(OLS) <a class="header-anchor" href="#普通最小二乘法-ols" aria-label="Permalink to &quot;普通最小二乘法(OLS)&quot;">​</a></h2><h3 id="因变量、自变量、控制变量" tabindex="-1">因变量、自变量、控制变量 <a class="header-anchor" href="#因变量、自变量、控制变量" aria-label="Permalink to &quot;因变量、自变量、控制变量&quot;">​</a></h3><ul><li><strong>因变量（Dependent Variable）：</strong> 因变量是研究中我们想要解释或预测的变量，其取决于其他变量。在回归分析中，我们将因变量表示为自变量的函数。例如，在研究哪些因素会影响收入，收入就是研究中的因变量。</li><li><strong>自变量（Independent Variable）：</strong> 自变量是研究中我们认为对因变量有影响的变量。自变量是我们用来解释或预测因变量的变量。例如，研究<strong>教育水平</strong>对<strong>收入</strong>的影响，<strong>教育水平</strong>是自变量， <strong>收入</strong>是因变量。单个研究中感兴趣的变量。</li><li><strong>控制变量（Control Variable）：</strong> 控制变量是在回归模型中添加的其他变量，用于控制其他可能对因变量产生影响的因素。控制变量的目的是消除其他变量对自变量与因变量之间关系的干扰效应，以得到更准确和准确的估计结果。例如，在研究<strong>教育水平</strong>对<strong>收入</strong>的影响，其他因素也会对收入有所影响，所以我们在模型中添加的年龄、性别和地理位置可能被视为控制变量。</li></ul><p>$$y = \beta_1 x_1 + \beta_2 x_2 + \beta_3 x_3 + \mu$$</p><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y x1 x2 x3</span></span></code></pre></div><h3 id="证明ols参数是无偏的" tabindex="-1">证明OLS参数是无偏的 <a class="header-anchor" href="#证明ols参数是无偏的" aria-label="Permalink to &quot;证明OLS参数是无偏的&quot;">​</a></h3><p>估计量的<strong>无偏性是指，样本中估计出的参数的期望值等于真实参数的值。</strong></p><p>1、线性参数（$\beta$）</p><p>$y = \beta_1x_1 + \beta_2x_2 + \beta_3x_3 + \beta_4 x_1^2 + \mu$</p><p>2、随机抽样 【显示生活中出现：自选择，样本选择问题】</p><p>3、解释变量的样本有波动：x的值不是完全相同的</p><p>4、<strong>零条件均值</strong>：自变量与扰动项不相关 【遗漏变量，双向因果】</p><blockquote><p>2,4 内生性问题</p></blockquote><p>除了知道参数估计量是有效的：即这个估计量在所有这样的线性无偏估计量一类中有最小方差。方差越小，说明与真实值的离散度越小。<strong>“有效”</strong></p><ol start="5"><li>同方差的假设</li><li>随机扰动性没有相关性</li></ol><blockquote><p>5;6 会影响估计的标准误：稳健标准误，聚类稳健标准误</p></blockquote><h2 id="固定效应模型-随机效应模型" tabindex="-1">固定效应模型&amp;随机效应模型 <a class="header-anchor" href="#固定效应模型-随机效应模型" aria-label="Permalink to &quot;固定效应模型&amp;随机效应模型&quot;">​</a></h2><h3 id="个体固定效应" tabindex="-1">个体固定效应 <a class="header-anchor" href="#个体固定效应" aria-label="Permalink to &quot;个体固定效应&quot;">​</a></h3><ul><li>以企业id未识别变量</li></ul><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> grunfeld.dta, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">clear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">xtset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> company year</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 组内差分</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">xtreg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> invest mvalue kstock, fe</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 添加n-1个虚拟变量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> invest mvalue kstock </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">company </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* ssc install reghdfe</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* ssc install ftools</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 添加n-1个虚拟变量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reghdfe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> invest mvalue kstock ,  </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">absorb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i.company)</span></span></code></pre></div><h3 id="企业固定效应、行业固定效应、时间固定效应" tabindex="-1">企业固定效应、行业固定效应、时间固定效应 <a class="header-anchor" href="#企业固定效应、行业固定效应、时间固定效应" aria-label="Permalink to &quot;企业固定效应、行业固定效应、时间固定效应&quot;">​</a></h3><p>虞义华,赵奇锋,鞠晓生.发明家高管与企业创新[J].中国工业经济,2018,No.360(03):136-154. $$ Innovation_{i,t} &amp;= \alpha + \beta PreCEO_inventor_{i,t-1} + \sum \gamma_k Firm_control_{k,i,t-1} \ &amp;\quad + \delta Industry_i + \theta Year_t + \mu Province_i + \epsilon_{i,t} $$</p><blockquote><p>Industry Year Province 分别表示企业所属行业效应、年份效应以及所属省份效应,本文在回归分析中对以上三种效应均进行控制。</p></blockquote><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">global</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> firmcontrol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;L1.ln_assets L1.ln_firmage L1.ln_fixedpp L1.ln_salespp L1.leverage L1.cashassets_ratio L1.MB_ratio L1.salesgrowth L1.ROA L1.stockreturn L1.stockvolatility L1.herfindahl L1.herfindahl_sq&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* innoefficiency01 i.year i.industry i.province  $firmcontrol L1.preceo_inventor, r</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> innoefficiency01 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">year </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">industry </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">province </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">///</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  $</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firmcontrol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> L1.preceo_inventor, r</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reghdfe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> $</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firmcontrol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> L1.preceo_inventor, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">absorb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">( i.year i.industry i.province) r</span></span></code></pre></div><h2 id="tobit-probit-logit回归" tabindex="-1">Tobit_Probit_Logit回归 <a class="header-anchor" href="#tobit-probit-logit回归" aria-label="Permalink to &quot;Tobit_Probit_Logit回归&quot;">​</a></h2><h3 id="使用" tabindex="-1">使用 <a class="header-anchor" href="#使用" aria-label="Permalink to &quot;使用&quot;">​</a></h3><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A[y的类型] ---|连续变量| B[线性回归]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A ---|二元分类变量| C[logit_probit回归]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A ---|计数变量| D[泊松回归]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A ---|截断数据| E[Tobit]</span></span></code></pre></div><p>根据因变量Y的状态，选择合适的模型。</p><ul><li>线性回归：当因变量和自变量之间的关系是线性的，并且不需要考虑因变量取值的限制和二元问题时，可以使用线性回归模型。</li><li>Probit回归和Logit回归：当因变量是二元的（只有两个取值）时，可以使用Probit回归或Logit回归。</li><li>Possion: 当因变量是计数变量时，</li><li>Tobit回归：当因变量存在截断时，可以使用Tobit回归。</li></ul><h4 id="董事会断裂带与公司股票崩盘风险【中国工业经济】" tabindex="-1">董事会断裂带与公司股票崩盘风险【中国工业经济】 <a class="header-anchor" href="#董事会断裂带与公司股票崩盘风险【中国工业经济】" aria-label="Permalink to &quot;董事会断裂带与公司股票崩盘风险【中国工业经济】&quot;">​</a></h4><p>为检验董事会断裂带对公司股价崩盘风险的影响，借鉴 Kim et al.(2011a,2011b)、权小锋等(2015)、王化成等(2015)等以往文献,设定如下<strong>多元回归模型</strong>进行检验:</p><p>第二种度量股价崩盘风险(Ncskew)的方法公司股票负收益偏态系数,其数值越大,说明公司股票收益率偏态系数负的程度越高,公司股价崩盘风险越大。</p><p>$Ncskew_{i+1}=\beta_0+\beta_i Faulline_i+\sum Control_i+\sum Industry_i+\sum Year_i+\varepsilon_i$</p><p>$y = \beta_1x_1 + \beta_2x_2 + \beta_3x_3 + \mu$</p><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 董事会断裂带与公司股票崩盘风险</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> F1ncskewe Fstrengh adturne ncskewe sigmae ameanwre size pb_cs lev currentratio roe accm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">sh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cr2_5 index_2014 Y2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Y10 Ind2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Ind21 ,r</span></span></code></pre></div><h2 id="logit-pobit模型" tabindex="-1">Logit_Pobit模型 <a class="header-anchor" href="#logit-pobit模型" aria-label="Permalink to &quot;Logit_Pobit模型&quot;">​</a></h2><p>$y = \beta_1x_1 + \beta_2x_2 + \beta_3x_3 + \mu$</p><p>$y$是一个分类变量（0,1），即它只有两种可能的结果（如 0 或 1）。</p><div class="language-STATA vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">STATA</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">help</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> logit</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">help</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> probit</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">logit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y x1 x2 x3</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">probit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y x1 x2 x3</span></span></code></pre></div><h4 id="董事会断裂带与公司股票崩盘风险【中国工业经济】-1" tabindex="-1">董事会断裂带与公司股票崩盘风险【中国工业经济】 <a class="header-anchor" href="#董事会断裂带与公司股票崩盘风险【中国工业经济】-1" aria-label="Permalink to &quot;董事会断裂带与公司股票崩盘风险【中国工业经济】&quot;">​</a></h4><p>为检验董事会断裂带对公司股价崩盘风险的影响，借鉴 Kim et al.(2011a,2011b)、权小锋等(2015)、王化成等(2015)等以往文献,设定如下<strong>多元回归模型</strong>进行检验:</p><p>第一种度量股价崩盘风险虚拟变量(Crash)的方法,若一年中公司股票某一周独特的周回报率W;)<strong>低于其分布均值 2.58 个标准差取 1,否则取0</strong>。</p><p>$Crash_{i+1}=\beta_0+\beta_i Faulline_i+\sum Control_i+\sum Industry_i+\sum Year_i+\varepsilon_i$</p><p>第二种度量股价崩盘风险(Ncskew)的方法公司股票负收益偏态系数,其数值越大,说明公司股票收益率偏态系数负的程度越高,公司股价崩盘风险越大。</p><p>$Ncskew_{i+1}=\beta_0+\beta_i Faulline_i+\sum Control_i+\sum Industry_i+\sum Year_i+\varepsilon_i$</p><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 董事会断裂带与公司股票崩盘风险</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">global</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> control</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;adturne ncskewe sigmae ameanwre size pb_cs lev currentratio roe accm sh cr2_5 index_2014&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> F1ncskewe Fstrengh </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">control</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Y2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Y10 Ind2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Ind21 ,r </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">logit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> F1crash4e Fstrengh adturne ncskewe sigmae ameanwre size pb_cs lev currentratio roe accm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">sh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cr2_5 index_2014 Y2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Y10 Ind2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Ind21</span></span></code></pre></div><h2 id="泊松回归-poisson-regression" tabindex="-1">泊松回归（Poisson Regression） <a class="header-anchor" href="#泊松回归-poisson-regression" aria-label="Permalink to &quot;泊松回归（Poisson Regression）&quot;">​</a></h2><p>$y = \beta_1x_1 + \beta_2x_2 + \beta_3x_3 + \mu$</p><p>$y$是因变量为计数变量的情况，即因变量是非负整数。泊松回归假设因变量$y$是泊松分布。</p><h3 id="发明家高管与企业创新【中国工业经济】" tabindex="-1">发明家高管与企业创新【中国工业经济】 <a class="header-anchor" href="#发明家高管与企业创新【中国工业经济】" aria-label="Permalink to &quot;发明家高管与企业创新【中国工业经济】&quot;">​</a></h3><p>$$ I n n o v ai o n_{i,t}=\alpha+\beta P r e C E O_i n v e n t o r_{i,t-1}+\sum\gamma_{k}F i r m_c o n t r o l_{k,i,t-1} +\delta I n d u s t r y_{i}+\theta Y e a r_{t}+\mu P r o v i n c e_{i}+\varepsilon_{i,t} $$</p><p>因变量为专利授权量。“人口数量、专利数量、奖牌数量、手机销售数量”</p><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">help</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> poisson</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">poisson</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y x1 x2 x3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">global</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> firmcontrol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;L1.ln_assets L1.ln_firmage L1.ln_fixedpp L1.ln_salespp L1.leverage L1.cashassets_ratio L1.MB_ratio L1.salesgrowth L1.ROA L1.stockreturn L1.stockvolatility L1.herfindahl L1.herfindahl_sq&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">poisson</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> patentall_grant </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">year </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">industry </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">province </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firmcontrol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> L1.preceo_inventor</span></span></code></pre></div><h2 id="tobit模型" tabindex="-1">Tobit模型 <a class="header-anchor" href="#tobit模型" aria-label="Permalink to &quot;Tobit模型&quot;">​</a></h2><p>Tobit回归（Tobit Regression）：适用于因变量为截断变量的情况。截断变量是指只有在某个特定范围内的值才能被观测到，其他值都无法被观测到。</p><ul><li>问卷只统计了年收入小于10万的具体数值</li><li>大于10万的都变成“收入在10万元以上”这样的选项，但是不知道具体数值</li></ul><h3 id="用地成本对企业出口行为的影响及其作用机制" tabindex="-1">用地成本对企业出口行为的影响及其作用机制 <a class="header-anchor" href="#用地成本对企业出口行为的影响及其作用机制" aria-label="Permalink to &quot;用地成本对企业出口行为的影响及其作用机制&quot;">​</a></h3><blockquote><p>本文的数据样本中存在大量非出口企业,约占总样本的 62%(7727/12400)。这种情况下.直接使用普通最小二乘法(OLS)对整个样本进行线性回归.得到的估计结果有偏。这是因为被解释变量断尾后,其概率密度也会随之发生变化。当被解释变量为截取数据时,虽然有全部的观测数据。但对于某些观测数据被压缩在一个点上，此时被解释变量的概率分布就变成由一个离散点与一个连续分布所组成的“联合分布”。这种情况下,无论使用整个样本,还是剔除离散点的子样本.OLS 估计都不能得到一致估计,而 Tobit 模型却可以克服这一问题。</p></blockquote><div class="language-STATA vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">STATA</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">help</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> tobit</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">tobit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y x1 x2 x3</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* ul ll</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">tobit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lnexport1 lnland_cost_s </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ind_code </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">city_code,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">vce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cl county_code)</span></span></code></pre></div><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">global</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> firmcontrol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;L1.ln_assets L1.ln_firmage L1.ln_fixedpp L1.ln_salespp L1.leverage L1.cashassets_ratio L1.MB_ratio L1.salesgrowth L1.ROA L1.stockreturn L1.stockvolatility L1.herfindahl L1.herfindahl_sq&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* innoefficiency01 i.year i.industry i.province  $firmcontrol L1.preceo_inventor, r</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> innoefficiency01 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">year </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">industry </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">province </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">///</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  $</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firmcontrol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> L1.preceo_inventor, r</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reghdfe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> $</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firmcontrol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> L1.preceo_inventor, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">absorb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">( i.year i.industry i.province) r</span></span></code></pre></div><h2 id="稳健与聚类-稳健标准误选择问题" tabindex="-1">稳健与聚类-稳健标准误选择问题 <a class="header-anchor" href="#稳健与聚类-稳健标准误选择问题" aria-label="Permalink to &quot;稳健与聚类-稳健标准误选择问题&quot;">​</a></h2><h2 id="不显著的解决思路" tabindex="-1">不显著的解决思路 <a class="header-anchor" href="#不显著的解决思路" aria-label="Permalink to &quot;不显著的解决思路&quot;">​</a></h2><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D[显著性] --&gt; A[检查数据的错误] </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D[显著性] --&gt; aa[异常值处理]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D[显著性] --&gt; B[样本选取]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D[显著性] --&gt; C[变量测量方式]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D[显著性] --&gt; E[模型的选择] </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D[显著性] --&gt; F[控制变量的选取] </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D[显著性] --&gt; G[内生性的处理]</span></span></code></pre></div><p><strong><!----></strong></p><h3 id="检查数据错误" tabindex="-1">检查数据错误 <a class="header-anchor" href="#检查数据错误" aria-label="Permalink to &quot;检查数据错误&quot;">​</a></h3><p>通过<code>summarize</code>，<code>tabulate</code>等命令对数据进行描述性以及频率统计。识别数据是否有问题。比如，变量的取值应在0-1这个区间，但是计算后发现取值超过了这个区间。</p><ul><li>计算代码写错</li><li>没有注意缺失值的处理</li></ul><h3 id="异常值处理" tabindex="-1">异常值处理 <a class="header-anchor" href="#异常值处理" aria-label="Permalink to &quot;异常值处理&quot;">​</a></h3><ul><li>缩尾截尾（winsor2）</li><li>错误（利润率为负等等） 0 - 1</li></ul><h3 id="样本选取" tabindex="-1">样本选取 <a class="header-anchor" href="#样本选取" aria-label="Permalink to &quot;样本选取&quot;">​</a></h3><ul><li>是否需要包含ST\PT的企业</li><li>是否需要包含金融行业</li><li>样本选取年限2007-至今</li></ul><h3 id="变量的测量方式" tabindex="-1">变量的测量方式 <a class="header-anchor" href="#变量的测量方式" aria-label="Permalink to &quot;变量的测量方式&quot;">​</a></h3><p>不同论文采用不同的测量方式</p><p>战略变革</p><ul><li>从公司层面出发，战略是企业基于自身资源所做出的资源配置决策。业关键领域资源主要是指以下六个方面：①研发投入强度，用于衡量企业用于创新的资源；②广告投入强度，反应企业用于营销的资源；③非生产性支出，反应企业的费用结构；④固定资产更新率与存货水平，反应企业的产能扩张状况；⑥财务杠杆率，则反映企业的资本结构。</li><li>在公司层面的研究中，将战略变革定义为公司产品的多元化水平、或公司产品的地域多元化水平。</li><li>Herrmann和Nadkarni (2014)的实证研究中，将战略变革分为了“发起”和“实施”两个维度。其中，战略变革“发起”是从战略内容变化的视角进行测量（如“进入／退出了国际市场”），战略变革“实施”则是从战略流程变化的视角进行测量，考察了如员工数的增减、高管职称或者是头衔的变化等，共计五个指标。</li></ul><p>看文献： 初步 --&gt; 数据；实证 --&gt; idea --&gt; 调整</p><h3 id="模型的选择" tabindex="-1">模型的选择 <a class="header-anchor" href="#模型的选择" aria-label="Permalink to &quot;模型的选择&quot;">​</a></h3><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A[y的类型] ---|连续变量| B[线性回归]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A ---|二元分类变量| C[logit_probit回归]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A ---|计数变量| D[泊松回归]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A ---|截断数据| E[Tobit]</span></span></code></pre></div><h3 id="控制变量的组合" tabindex="-1">控制变量的组合 <a class="header-anchor" href="#控制变量的组合" aria-label="Permalink to &quot;控制变量的组合&quot;">​</a></h3><ul><li>梁上坤,徐灿宇,王瑞华.董事会断裂带与<strong>公司股价崩盘</strong>风险[J].中国工业经济,2020,No.384(03):155-173.</li></ul><blockquote><p>在模型中加入以下控制变量: 股票周换手率均值(Dturn)股票独特周回报率的偏度(Ncskewox )股票独特周回报率的标准差(Sigma)股票独特周回报率的均值(Wret)公司规模(Size)成长性(P)财务杆(Lev)流动比率(Cur)财务业绩(Roe)信息不明程度(Accm)第一大股东持股比例(Sh)第二到第五大股东持股比例(Sh2 5)市场化水平(Index)。</p><p>A\B\C</p></blockquote><ul><li>曹廷求,张光利.自愿性信息披露与<strong>股价崩盘风险</strong>:基于电话会议的研究[J].经济研究,2020,55(11):191-207.</li><li>A\B\C\D\E</li><li>易志高,李心丹,潘子成等.公司高管减持同伴效应与<strong>股价崩盘风险</strong>研究[J].经济研究,2019,54(11):54-70.</li><li>A\C\E</li></ul><h2 id="例文软件实现与解读" tabindex="-1">例文软件实现与解读 <a class="header-anchor" href="#例文软件实现与解读" aria-label="Permalink to &quot;例文软件实现与解读&quot;">​</a></h2><h1 id="稳健性和内生性" tabindex="-1">稳健性和内生性 <a class="header-anchor" href="#稳健性和内生性" aria-label="Permalink to &quot;稳健性和内生性&quot;">​</a></h1><h2 id="稳健性检验" tabindex="-1">稳健性检验 <a class="header-anchor" href="#稳健性检验" aria-label="Permalink to &quot;稳健性检验&quot;">​</a></h2><h2 id="为什么要做稳健性检验" tabindex="-1">为什么要做稳健性检验？ <a class="header-anchor" href="#为什么要做稳健性检验" aria-label="Permalink to &quot;为什么要做稳健性检验？&quot;">​</a></h2><p>”玩数据“？：数据的特殊特征</p><h2 id="方法" tabindex="-1">方法 <a class="header-anchor" href="#方法" aria-label="Permalink to &quot;方法&quot;">​</a></h2><h3 id="变量替换法" tabindex="-1">变量替换法 <a class="header-anchor" href="#变量替换法" aria-label="Permalink to &quot;变量替换法&quot;">​</a></h3><p>因变量的测量方式不同</p><p>战略变革</p><ul><li>从公司层面出发，战略是企业基于自身资源所做出的资源配置决策。业关键领域资源主要是指以下六个方面：①研发投入强度，用于衡量企业用于创新的资源；②广告投入强度，反应企业用于营销的资源；③非生产性支出，反应企业的费用结构；④固定资产更新率与存货水平，反应企业的产能扩张状况；⑥财务杠杆率，则反映企业的资本结构。</li><li>在公司层面的研究中，将战略变革定义为公司产品的多元化水平、或公司产品的地域多元化水平。</li><li>Herrmann和Nadkarni (2014)的实证研究中，将战略变革分为了“发起”和“实施”两个维度。其中，战略变革“发起”是从战略内容变化的视角进行测量（如“进入／退出了国际市场”），战略变革“实施”则是从战略流程变化的视角进行测量，考察了如员工数的增减、高管职称或者是头衔的变化等，共计五个指标。</li></ul><p><strong>发明家高管与企业创新</strong></p><blockquote><p>其中,Innovation为模型因变量,代表企业在第t 年的研发新绩效,<strong>企业创新绩效可以分别从研发投人,创新产出和创新效率三个维度来衡量</strong>。研发投入使用企业研发投入强度(Rdsales_ratio)来衡量,研发投入强度即企业当年研发投人与营业总收入之比。创新产出指企业所获专利授权量,根据中国国家统计局的分类.在中国所申请的专利有发明、实用新型、外观设计三种类型,本文遵循已有文献中的做法，使用企业当年所有申请的专利中最终获得授权的专利数量作为企业创新绩效的代理变量(Chang et al,2015).</p></blockquote><h3 id="模型的选择-1" tabindex="-1">模型的选择 <a class="header-anchor" href="#模型的选择-1" aria-label="Permalink to &quot;模型的选择&quot;">​</a></h3><p>对于专利而言，选择专利数加一取对数作为因变量： 线性模型进行估计。</p><p><strong>发明家高管与企业创新</strong></p><p>$$L n_p a t e n t a l l_g r a n t=\ln\left(1+P a t e n t a l l_g r a n t\right)$$</p><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ln_patentall_grant </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">year </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">industry </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">province </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">///</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  $</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firmcontrol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> L1.preceo_inventor, r</span></span></code></pre></div><p>不做对数处理，用泊松回归。</p><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">poisson</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> patentall_grant </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">year </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">industry </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">province </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">///</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  $</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firmcontrol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> L1.preceo_inventor, r</span></span></code></pre></div><h3 id="补充变量法" tabindex="-1">补充变量法 <a class="header-anchor" href="#补充变量法" aria-label="Permalink to &quot;补充变量法&quot;">​</a></h3><ul><li>可能遗漏了一些因素，加入新的控制变量进行回归。</li></ul><h3 id="调整样本" tabindex="-1">调整样本 <a class="header-anchor" href="#调整样本" aria-label="Permalink to &quot;调整样本&quot;">​</a></h3><p>结论是否具有普适性。</p><p>看同样的规律在不同时间，不同类型的企业规律是否依旧成立。</p><ul><li><p>分样本回归</p></li><li><p>改变样本期限: DID</p></li><li><p>改变样本容量</p></li></ul><h3 id="内生性问题的修正" tabindex="-1">内生性问题的修正 <a class="header-anchor" href="#内生性问题的修正" aria-label="Permalink to &quot;内生性问题的修正&quot;">​</a></h3><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D[内生性问题] ---|原因是| A[遗漏变量] </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D[内生性问题] ---|原因是| B[样本选择]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D[内生性问题] ---|原因是| C[双向因果]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D[内生性问题] ---|原因是| E[测量误差]</span></span></code></pre></div><ul><li><a href="https://www.lianxh.cn/news/32ae13ec789a1.html#:~:text=%E8%AE%BA%E6%96%87%E4%B8%AD%EF%BC%8C%E6%88%91%E4%BB%AC%E5%B8%B8%E5%B8%B8%E8%A6%81%E6%B1%82,%E6%89%80%E5%BE%97%E7%9A%84%E7%BB%93%E8%AE%BA%E6%98%AF%E5%90%A6%E5%8F%AF%E9%9D%A0%E3%80%82" target="_blank" rel="noreferrer">稳健性检验！稳健性检验</a></li></ul><h2 id="内生性来源以及内生性在论文中的意义" tabindex="-1">内生性来源以及内生性在论文中的意义 <a class="header-anchor" href="#内生性来源以及内生性在论文中的意义" aria-label="Permalink to &quot;内生性来源以及内生性在论文中的意义&quot;">​</a></h2><h3 id="内生性来源" tabindex="-1">内生性来源 <a class="header-anchor" href="#内生性来源" aria-label="Permalink to &quot;内生性来源&quot;">​</a></h3><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph LR</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D[内生性问题] ---|原因是| A[遗漏变量] </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D[内生性问题] ---|原因是| B[样本选择]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D[内生性问题] ---|原因是| C[双向因果]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D[内生性问题] ---|原因是| E[测量误差]</span></span></code></pre></div><p>5.2 内生性与工具变量</p><p>5.3 IV估计量：IV、2SLS和GMM</p><p>5.4 恰好与过度识别模型的IV估计</p><p>5.5 弱工具变量与3SLS估计</p><p>5.6 寻找工具变量的多种思路</p><p>5.7 稳健性检验思路</p><p>5.8 例文软件实现与解读</p><h3 id="did模型" tabindex="-1">DID模型 <a class="header-anchor" href="#did模型" aria-label="Permalink to &quot;DID模型&quot;">​</a></h3><p>DID (difference-in-differences model ) 也叫双重差分模型 现在要修一条高铁线路，必然会有穿过的城市和没有被穿过的城市。</p><p>$D_i=1$ 如果被铁路穿过的城市，$D_i=0$ 如果没被铁路穿过的城市。</p><p>$T = 0$铁路修好前，$T = 1$铁路修好后</p><p>被铁路穿过的城市，在修好铁路之前与之后的GDP差异。</p><p>$E(Y| D_i = 1,T =1)$ - $E(Y| D_i = 1,T =0)$</p><p>这个差异包含了两部分的因素：一部分是GDP自然增长的结果，一部分是政策效应的结果。</p><p>为了得到一个纯净的政策效应，需要排除自然增长的部分。</p><p>于是从那些没有被地铁穿过的城市，找一些城市，看他们自然增长如何，以替代被地铁穿过的城市的GDP自然增长。</p><p>$E(Y| D_i = 0,T =1)$ - $E(Y| D_i = 0,T =0)$</p><p>两次差分的结果 ：</p><p>$[E(Y| D_i = 1,T =1)$ - $E(Y| D_i = 1,T =0)] - [E(Y| D_i = 0,T =1)$ - $E(Y| D_i = 0,T =0)] $</p><table><thead><tr><th style="text-align:center;"></th><th style="text-align:center;">政策前</th><th style="text-align:center;">政策后</th></tr></thead><tbody><tr><td style="text-align:center;">实验组</td><td style="text-align:center;">10</td><td style="text-align:center;">18</td></tr><tr><td style="text-align:center;">控制组</td><td style="text-align:center;">8</td><td style="text-align:center;">15</td></tr></tbody></table><ul><li>（18- 10）- （15- 8）</li></ul><p>A</p><p>B1 B2 B3 B4</p><p>1:1</p><p>50 : 50</p><p>50 : 100</p><p>ties</p><h4 id="使用条件" tabindex="-1">使用条件 <a class="header-anchor" href="#使用条件" aria-label="Permalink to &quot;使用条件&quot;">​</a></h4><ul><li>平行趋势：回答为什么能将控制组的发展趋势替代实验组的发展趋势；控制组与实验组是相似的。</li></ul><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;DID.dta&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">clear</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> interaction  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> D </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> post</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y D </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> interaction x1 x2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">xtset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id time </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reghdfe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y D </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> interaction x1 x2 , </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">absorb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i.time i.id) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cluster</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 加上固定效应模型</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bysort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> D time: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> meany </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(y)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">twoway</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(line meany time if D </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,                                    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">///</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		  lpattern</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">solid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                                                ///</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		  lcolor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">black</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                                                  ///</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		  lwidth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">thin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                                                   ///</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		  scheme</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qleanmono</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                                              ///                    ///</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		  xline</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2005</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">lpattern</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(solid) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">lcolor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(red) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">lwidth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(thin)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        ///</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		  )                      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">///</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	(line</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> meany time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> D </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,                                    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">///</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		  lpattern</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(shortdash)                                            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">///</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		  lcolor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(black)                                                  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">///</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">		  lwidth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(thin)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ,                                               </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">///</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	xlabel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2010</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   , labsize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">medlarge</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)                            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">///</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	ylabel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(, labsize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">medlarge</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> format</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">(%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">2f</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)              </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">///</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	legend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;{处理组}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                                    ///</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		   label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;{控制组}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  )</span></span></code></pre></div><ul><li><code>bysort D time: egen meany = mean(y)</code>：对变量y进行排序，按处理组（D=1）和时间（time）的顺序生成均值变量meany。</li><li><code>twoway()</code>：生成一幅图。</li><li><code>line meany time if D == 1</code>：画处理组的均值随时间变化的折线。使用实线表示，颜色为黑色，线宽为thin。</li><li><code>lpattern(solid)</code>：处理组折线的线型为实线。</li><li><code>lcolor(black)</code>：处理组折线的颜色为黑色。</li><li><code>lwidth(thin)</code>：处理组折线的线宽为thin。</li><li><code>scheme(qleanmono)</code>：使用qleanmono主题（Stata的一种图形风格）。</li><li><code>xline(2005, lpattern(solid) lcolor(red) lwidth(thin))</code>：在2005年添加一条竖线表示政策干预时间点。该竖线线型为实线，颜色为红色，线宽为thin。</li><li><code>line meany time if D == 0</code>：画控制组的均值随时间变化的折线。使用短划线表示，颜色为黑色，线宽为thin。</li><li><code>xlabel(2000(2)2010 , labsize(medlarge))</code>：设置x轴标签。从2000年开始，每隔2年一个刻度，一直到2010年。标签字体大小为medlarge。</li><li><code>ylabel(, labsize(medlarge) format(%3.2f))</code>：设置y轴标签。标签字体大小为medlarge，格式为保留两位小数。</li><li><code>legend(label(1 &quot;{处理组}&quot;) label(2 &quot;{控制组}&quot;))</code>：设置图例。标签1为&quot;处理组&quot;，标签2为&quot;控制组&quot;。</li></ul><h3 id="多时点-did-渐进did" tabindex="-1">多时点 DID (渐进DID) <a class="header-anchor" href="#多时点-did-渐进did" aria-label="Permalink to &quot;多时点 DID (渐进DID)&quot;">​</a></h3><p>标准 DID 模型一般针对政策实施时点为同一个时期。2008年</p><p>下面对Standard DID 在同时固定个体与时间效应的基础上：</p><p>$Y_{it}=\beta_0+\beta_1<em>D_i</em>Post_t+\beta*\Sigma Z_{it}+\mu_i+\tau_t+\epsilon_{it}\quad$</p><p>Time-varying DID 用一个随时间和个体变化的处理变量代替 Standard DID 中常用的交互项。</p><p>可以理解为将所有未实行政策的当做控制组。</p><p>$Y_{it}=\beta_0+\beta_1<em>Treat_{it}+\beta</em>\Sigma Z_{it}+\mu_i+\tau_t+\epsilon_{it}$</p><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;DID_time.dta&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">clear</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">xtset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id time </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reghdfe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y  D  x1 x2 , </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">absorb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i.time i.id) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 加上固定效应模型</span></span></code></pre></div><h3 id="psm-倾向性的得分匹配" tabindex="-1">PSM(倾向性的得分匹配) <a class="header-anchor" href="#psm-倾向性的得分匹配" aria-label="Permalink to &quot;PSM(倾向性的得分匹配)&quot;">​</a></h3><ul><li>纠正：样本自选择问题。</li></ul><p>培自选择问题是指在实验或研究中，个体自主选择参加或不参加实验或研究，从而引发潜在的偏差。</p><p>比如，想要研究培训对工资的影响，但是员工会自主选择是否参加培训。</p><table><thead><tr><th style="text-align:center;">是否参加培训</th><th style="text-align:center;">工资</th></tr></thead><tbody><tr><td style="text-align:center;">A</td><td style="text-align:center;">$wage_a$</td></tr><tr><td style="text-align:center;">B</td><td style="text-align:center;">$wage_b$</td></tr><tr><td style="text-align:center;"></td><td style="text-align:center;">$wage_a - wage_b$</td></tr></tbody></table><p>$wage_a - wage_b$ 包含了 两组人本身的差异 + 培训的效果</p><p>消除【两组人本身的差异 】 ， 通过得分找出相似的人</p><h3 id="发明家高管与企业创新" tabindex="-1"><strong>发明家高管与企业创新</strong> <a class="header-anchor" href="#发明家高管与企业创新" aria-label="Permalink to &quot;**发明家高管与企业创新**&quot;">​</a></h3><p>参考<strong>发明家高管与企业创新</strong>（2022），完成匹配。</p><blockquote><p>(3)倾向得分匹配估计。本文接下来根据企业高管是否拥有发明家经历,采用倾向得分匹配方法(Propensity Score Matching,简称 PSM)估计发明家高管对企业创新专利产出的“处理效应”。</p></blockquote><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ssc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> install psmatch2</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">help</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> psmatch2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 随机排序： 消除样本顺序对匹配的影响</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> seed </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10101</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> random_order</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">runiform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">sort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> random_order</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 最近邻匹配代码</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*==========进行一对一匹配========================================</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 选择匹配变量：参照何种标准找出配对样本</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">global</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> firmcontrol_psm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Lln_assets Lln_firmage Lln_fixedpp Lln_salespp Lleverage Lcashassets_ratio LMB_ratio Lsalesgrowth LROA Lstockreturn Lstockvolatility Lherfindahl Lherfindahl_sq&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 先输入分组变量， preceo_inventor为分组变量【是否是发明家高管】</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">psmatch2 preceo_inventor </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">year </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">industry </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">province </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firmcontrol_psm</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> ///</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   , </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">outcome</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ln_patentall_grant) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">n</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ate ties </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">logit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* outcome(ln_patentall_grant)：表示要研究的结果变量，这里是申请和授予专利的自然对数。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* n(1)：表示匹配比例，这里表示对于每个暴露组中的一个观察值，要进行一个匹配，即暴露组和未暴露组中每个观察值之间的匹配比例为1:1。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* ate：表示要估计的平均处理效应，即治疗组与对照组之间的差异。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* ties：表示在计算倾向得分时如何处理相同得分的观察值，如果有两个控制组中距离相等，则将取两者匹配样本的均值。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* logit：表示使用logistic回归模型来估计倾向得分。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*========(2)邻近匹配，k=4========================================</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">psmatch2 preceo_inventor </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">year </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">industry </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">province </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firmcontrol_psm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> , </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">outcome</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ln_patentall_grant) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">n</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ate ties </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">logit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* 用匹配到的样本进行回归</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> preceo_inventor </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">year </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">industry </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">province </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firmcontrol_psm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _weight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> , </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cluster</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(firm_id)</span></span></code></pre></div><h3 id="psm-did" tabindex="-1">PSM + DID <a class="header-anchor" href="#psm-did" aria-label="Permalink to &quot;PSM + DID&quot;">​</a></h3><p>考虑到现实中的政策本质上还是会有选择的进行，比如一些政策明显具有倾向性，因此政策效应评估所使用的DID方法难免存在自选择偏差，而使用PSM方法可以为每一个处理组样本匹配到特定的控制组样本，使得准自然实验近似随机。</p><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> seed </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10101</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 设置随机数种子为10101</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ranorder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">runiform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 生成一个在[0,1]范围内的均匀分布随机数变量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">sort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ranorder    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 按随机数排序数据集，形成随机化实验的处理组和对照组</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">global</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> matchvar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x1 x2 x3   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 定义一个全局宏，表示匹配模型中需要使用的协变量变量名</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">psmatch2 treat </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">matchvar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">outcome</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(y) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">n</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ate ties </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">logit</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // 进行PSM匹配分析，treat为二进制处理变量，$matchvar表示使用之前定义的协变量，outcome(y)表示因变量为y，n(1)表示匹配一个对照组，ate表示计算平均处理效应，ties表示可以有多个匹配的情况下取平均值，logit表示使用logistic回归模型进行匹配</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pstest  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">matchvar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ,both </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">graph</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // 进行PSM后的平衡性检验，检验匹配前后协变量是否平衡，并画图表示</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">psgraph   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 画出匹配前后处理组和对照组的分布图</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> interaction  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> treat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> post</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // 构造交互项，用于拟合DID模型</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y treat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> interaction x1 x2  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _weight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> .</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">xtset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id time   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置面板数据的索引变量，id表示面板数据中个体的唯一标识，time表示面板数据中时间变量</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reghdfe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y  interaction x1 x2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _weight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!-=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> .</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">absorb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i.time i.id) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cluster</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 进行固定效应模型的拟合，使用reghdfe命令，其中_weight !-= . 表示用PSM匹配到的样本进行回归，absorb(i.time i.id)表示控制个体和时间固定效应  ，cluster 表示依据个体形成聚类稳健标准误</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">```</span></span></code></pre></div><h3 id="工具变量法" tabindex="-1">工具变量法 <a class="header-anchor" href="#工具变量法" aria-label="Permalink to &quot;工具变量法&quot;">​</a></h3><p>工具变量法 (IV) 可以解决遗漏变量、样本选择、双向因果和测量误差这四种违背经典线性回归假定情况的内生性问题。</p><p>工具变量z , 内生变量 x , 因变量 y， 随机扰动项u</p><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph LR;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">z --&gt; x</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">u --&gt; x</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">u --&gt; y</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x --&gt; y</span></span></code></pre></div><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ivtest.dta, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">clear</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           // 导入数据 ivtest.dta</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*  iq 内生  med</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ivreg2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lw s expr tenure rns smsa </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">year </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">iq </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> med </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,first  robust   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 用ivreg2做两阶段最小二乘估计，lw为因变量，s、expr、tenure等为控制变量，iq为内生变量，med为工具变量 robust表示使用文件标准误</span></span></code></pre></div><h4 id="弱工具变量检验" tabindex="-1">弱工具变量检验 <a class="header-anchor" href="#弱工具变量检验" aria-label="Permalink to &quot;弱工具变量检验&quot;">​</a></h4><p>弱工具变量检验是用来<strong>检验工具变量与内生变量之间的相关性是否足够强的方法</strong>。如果相关性较小，则称之为弱工具变量。在进行工具变量分析时，需要注意避免使用弱工具变量。如果所选的工具变量被确认为弱工具变量，那么使用工具变量的效果可能不明显。</p><ul><li><p>第一阶段回归结果是否显著</p></li><li><p>第一阶段F检验值：<code>F test of excluded instruments:</code></p></li><li><p>通过观察Cragg-Donald Wald F 统计量，如果其值大于Stock-Yogo weak ID test中10%误差水平的临界值，我们就可以拒绝原假设（工具变量为弱工具变量），这意味着不存在弱工具变量的问题。</p></li><li><p>通过观察Kleibergen-Paap Wald rk F 统计量，如果其值大于Stock-Yogo weak ID test中10%误差水平的临界值，我们就可以拒绝原假设（工具变量为弱工具变量），这意味着不存在弱工具变量的问题。</p></li></ul><h4 id="" tabindex="-1"><a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">​</a></h4><h3 id="发明家高管与企业创新【工具变量-固定效应】" tabindex="-1"><strong>发明家高管与企业创新</strong>【工具变量 + 固定效应】 <a class="header-anchor" href="#发明家高管与企业创新【工具变量-固定效应】" aria-label="Permalink to &quot;**发明家高管与企业创新**【工具变量 + 固定效应】&quot;">​</a></h3><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph LR;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A[发明家经历] --正向影响+--&gt; B[企业创新]</span></span></code></pre></div><p>互为因果</p><p>x--&gt;y：董事长和总经理的发明家经历对企业创新</p><p>y--&gt;x：企业创新能力高，更愿意聘任有发明名家经历的CEO</p><p>表 4 模型 2 表示第一阶段估计结果,其中,工具变量 PreCEO_homelandpp 的估计系数为-0.035,且在 1%水平上显著,也即企业高管籍贯所在地人均耕地面积越少,越具有冒险精神企业高管拥有发明家经历的概率也越高 与理论预期一致。</p><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">global</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> firmcontrol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;L1.ln_assets L1.ln_firmage L1.ln_fixedpp L1.ln_salespp L1.leverage L1.cashassets_ratio L1.MB_ratio L1.salesgrowth L1.ROA L1.stockreturn L1.stockvolatility L1.herfindahl L1.herfindahl_sq&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xtivreg2 ln_patentdes_grant  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firmcontrol</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  ///</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  (</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">L1.preceo_inventor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> L2.pre_homelandpp preceo_inventor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 用xtivreg2做面板数据估计，ln_patentall_grant为因变量，t为处理变量，$firmcontrol为控制变量，L1.preceo_inventor =为内生变量， L2.pre_homelandpp preceo_inventor为工具变量</span></span></code></pre></div><h3 id="heckman两阶段" tabindex="-1">Heckman两阶段 <a class="header-anchor" href="#heckman两阶段" aria-label="Permalink to &quot;Heckman两阶段&quot;">​</a></h3><p>Heckman 两阶段模型主要是针对性解决<strong>样本选择偏误 (sample selection bias)</strong> 导致的内生性问题。</p><p>样本选择偏差指的是<strong>样本选择</strong>不是随机的，与研究变量相关，导致样本与总体存在差异。【我们只采样了该公司高工资员工的数据，而没有采样低工资员工的数据】</p><h4 id="政府创新补助的信号传递机制与企业创新" tabindex="-1">政府创新补助的信号传递机制与企业创新 <a class="header-anchor" href="#政府创新补助的信号传递机制与企业创新" aria-label="Permalink to &quot;政府创新补助的信号传递机制与企业创新&quot;">​</a></h4><blockquote><p>从政府创新补助与企业技术创新活动间的互动逻辑来看， 政府补助发放这一看似外生给定的 政策影响，事实上存在样本选择性偏误和互为因果引起的内生性问题</p></blockquote><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">global</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;rdsubsidy nrdsubsidy&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">global</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> control</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;size age lev fasset growth holderr1 bsmsalary market&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">heckman</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rd1  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> $</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">control</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">year </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">region </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">industry, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rdsubsidy_dum </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lsubsidy llnptinf </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">control</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i.year i.region i.industry) twostep</span></span></code></pre></div><ol><li>定义全局宏变量 <code>$x</code>，其值为 <code>&quot;rdsubsidy nrdsubsidy&quot;</code>。</li><li>定义全局宏变量 <code>$control</code>，其值为 <code>&quot;size age lev fasset growth holderr1 bsmsalary market&quot;</code>。</li><li>运行 Heckman 选择模型，其中：</li></ol><ul><li>$y$为 <code>rd1</code>。</li><li>方程右边为<code>$x $control i.year i.region i.industry</code></li><li>固定效应变量包括 <code>year</code>，<code>region</code>，<code>industry</code>。</li><li>对于选择方程，暂时性选项变量中的 <code>rdsubsidy_dum</code> 是关键，它是二值指示变量，将会受到 <code>lsubsidy llnptinf</code> 和 <code>$control i.year i.region i.industry</code> 的影响</li><li><code>twostep</code>选择模型采用两步法进行估计。</li></ul><h3 id="断点回归" tabindex="-1">断点回归 <a class="header-anchor" href="#断点回归" aria-label="Permalink to &quot;断点回归&quot;">​</a></h3><p><strong>断点回归</strong>是一种&#39;准自然实验&#39;式研究，其思想在于存在一个连续变量，该变量某临界<strong>点</strong>cutoff处可拆分成左侧和右侧，进而研究该变量对于另一变量（结果变量Y，或因变量）的影响。</p><p>比如，了解<strong>上大学对工资</strong>影响。但上大学与未上大学的的人群本身存在差异。但是在大学录取分数的领结点处，可以认为是随机的，差异不大，进而构造了一个随机试验。</p><p>550 分 549 551</p><ul><li>精确断点回归；模糊断点回归</li></ul><p><strong>养老金对缓解农村居民医疗负担的作用——为何补贴收入的效果好于补贴医保</strong></p><blockquote><p>本文利用只有满 60 周岁才能领取新农保养老金这个非连续性制度设计，采用断点回归设计(RegressionDiscontinuity Design,RDD)来检验新农保对医疗负担的影响。</p><p>各地政策差异等原因,有些年满 60 岁的参保者未必能领取到养老金，也有少部分 60 岁以下的参保者领到了养老金。</p><p>取养老金的概率在断点处发生 0到1的变化,仅仅发生了一个小于的跳跃因此符合模糊断点的设定(Fuzzy Regression Design,FRD)。</p></blockquote><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* ssc install rdrobust </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rdrobust f_burden agesd , </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fuzzy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(nrps_get)  </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bwselect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msesum) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">///</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   covs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Edu Marry_Status body_pain hypertension chro_disease_num  GH_poor_2 memory_sr_poor  ADL_IADL Y2_CESD_score insured) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">///</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   vce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cluster householdID)  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 使用rdrobust进行断点回归分析</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// f_burden: 因变量</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// agesd: 断点变量  （60.5    所有变量减去端点值）</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// fuzzy(nrps_get)  是否获得补助</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// bwselect(msesum)：表示进行带宽选择，其中 msesum 是一个选项，表示使用均方误差（MSE）来选择带宽大小。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 使用covs选项指定控制变量</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*covs(Edu Marry_Status body_pain hypertension chro_disease_num GH_poor_2 memory_sr_poor ADL_IADL Y2_CESD_score insured) ///</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 使用vce选项指定方差估计方法为cluster，并设置集群变量为householdID</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* vce(cluster householdID)</span></span></code></pre></div><h3 id="合成控制法" tabindex="-1">合成控制法 <a class="header-anchor" href="#合成控制法" aria-label="Permalink to &quot;合成控制法&quot;">​</a></h3><p>前文提到:DID,PSM，都需要控制组作为比较对象。但是万一找不到一个合适的控制组怎么办？</p><p>比如，要考察仅在A市实施的某政策效果，自然会想到以之相近的B市作为控制地区；但实际上，无论怎么找控制组，控制组的城市毕竟无法与A市完全相同。</p><p>Abadie and Gardeazabal (2003)提出“合成控制法”（Synthetic Control Method）。</p><p>其基本思想是，但数据加权，人为的用数据构造一个“合成控制地区”（synthetic control region），也就是合成的控制组。并将“真实A市”与“合成A市”进行对比，故名“合成控制法”。]</p><p>案例：</p><p>1988年11月美国加州通过了当代美国最大规模的控烟法（anti-tobacco legislation），并于1989年1月开始生效。</p><p>Abadie et al. (2010)根据美国1970-2000年的州际面板数据，采用合成控制法研究美国加州1988年第99号控烟法（Proposition 99）的效果。</p><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* ssc install synth</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> smoking.dta,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">clear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">xtset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state year    </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">tab</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> year</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">sum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> year</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">* ssc install synth </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">labelbook</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">synth cigsale retprice lnincome age15to24 beer  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">///</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    cigsale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1975</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cigsale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1980</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cigsale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1988</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">///</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    trunit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">trperiod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1989</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">xperiod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1980</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1988</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">///</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    figure nested   </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">keep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(synth_dta)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot; cigsale &quot; 为结果变量（y）</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot; retprice lnincome age15to24 beer cigsale(1975) cigsale(1980) cigsale(1988) &quot;为预测变量（x）。	cigsale(1975) cigsale(1980) cigsale(1988) 分别表示人均香烟消费在 1975、1980 与 1988 年的取值。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;trunit(3)&quot; 表示第 3 个州（即加州）为 处理组 (实验对象)。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;trperiod(1989)&quot; 表示控烟法在 1989 年开始实施 (政策实施时点)。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;xperiod(1980(1)1988)&quot; 表示将y在 1980-1988 年期间进行平均，其中 &quot;1980(1)1988&quot; 表示始于1980年，以 1 年为间隔，而止于 1988 年</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> synth_dta.dta, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">clear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">rename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">_Y_treated _Y_synthetic</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  (</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Y_treated Y_synthetic</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> effect</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Y_treated </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Y_synthetic</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//定义处理效应为变量effect，其中&quot;Y_treated&quot;与&quot;Y_synthetic&quot;分别表示处理地区与合成控制的结果变量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> variable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _time </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;时间&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> variable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> effect </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;实验组和合成组的差异&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">line</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> effect _time, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">xline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1989</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,lp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dash</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">yline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,lp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dash</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">shellout </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;$</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">workpath</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\参考论文\房产税对产业转移的影响：来自重庆和上海的经验证据\房产税对产业转移的影响：来自重庆和上海的经验证据.pdf&quot;</span></span></code></pre></div><h3 id="事件研究法event-study" tabindex="-1">事件研究法Event Study <a class="header-anchor" href="#事件研究法event-study" aria-label="Permalink to &quot;事件研究法Event Study&quot;">​</a></h3><ul><li>如果研究中既有处理组又有对照组，那么 DID 是合适的研究设计；</li><li>如果只有处理组，并且处理组的数据是时间序列数据，那么 Event Study更合适研究方法。</li></ul><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;F:\workdir\工作事件\stata网课\讲课大纲与数据\示例数据\eventdata.dta&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">clear</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">td</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event_date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">td</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*首先对面板数据按照id和日期进行排序</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">sort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> company_id date</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/*产生一个新变量datenum，</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">在每个id内部对日期进行编号*/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">by</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> company_id: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> datenum </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> _n</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/*产生一个新变量target，代表了事件发生的日期，</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">因为在上一步我们已经进行了编号，因此这一步中，</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">如果事件发生的日期是2Jan2020，那么target产生的值就会是2*/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">by</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> company_id: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> target</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">datenum </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> date</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">event_date </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*产生一个新变量td，填充了每个id内事件发生的日期编号</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> td</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">min</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(target), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">by</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(company_id)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/*最终dif变量代表了距离事件发生的天数，0代表事件发生当天，</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">负值代表事件发生前，正值代表事件发生后*/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dif</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">datenum</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">td </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*我们选择事件发生的前两天和后两天作为事件发生的窗口</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">by</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> company_id: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event_window</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dif</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dif</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*计算每个id内部属于事件窗口内的个数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count_event_obs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event_window), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">by</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(company_id) </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*选择估计窗口样本，原则是选择事件发生前且不与事件窗口重合的样本</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">by</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> company_id: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> estimation_window</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dif</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dif</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*同理，计算每个id内部属于估计窗口的个数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count_est_obs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(estimation_window), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">by</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(company_id) </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*以下两步将事件窗口和估计窗口的缺失值替换成0值</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event_window</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event_window</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> estimation_window</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> estimation_window</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/*这里我们需要在做回归之前，</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">将不满足我们所定义的事件窗口长度(5天)的样本去掉*/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">drop</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count_event_obs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*同理，我们也需要将不符合估计窗口长度(30天)的样本去掉</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">drop</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count_est_obs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 30</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*创建一个新的变量储存我们估计的正常表现值</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> predicted_return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*为每个公司创建一个新的变量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(company_id) </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/*在这一步，我们利用估计窗口，循环估计每个id正常表现值，</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">该正常变现值是通过回归在估计窗口内的Y与X得到，</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">并将其进一步在事件窗口中进行预测*/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">local</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> N</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 354</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //这里的N代表上一步创建的id的最大值</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">forvalues</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">N</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	l id company_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dif</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	*得到估计窗口中的正常回报率</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	reg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ret</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> market_ret </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> estimation_window</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	*估计在事件窗口内计算正常回报率</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	predict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> predicted_return </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event_window</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	drop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">sort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id date</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*异常收益率是实际收益率与不发生事件的估计收益率的差值</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> abnormal_return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=ret-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">predicted_return </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event_window</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*另一个指标是累计异常收益率</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">by</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cumulative_abnormal_return </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> total</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(abnormal_return)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">sort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id date</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*计算公式中所需要的AR_SD</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">by</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ar_sd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(abnormal_return)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">local</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> event_window_days</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sqrt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">event_window_days</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)*(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cumulative_abnormal_return/ar_sd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cumulative_abnormal_return </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dif</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, robust</span></span></code></pre></div><h1 id="中介效应与调节效应" tabindex="-1">中介效应与调节效应 <a class="header-anchor" href="#中介效应与调节效应" aria-label="Permalink to &quot;中介效应与调节效应&quot;">​</a></h1><h2 id="检验何种假设" tabindex="-1">检验何种假设 <a class="header-anchor" href="#检验何种假设" aria-label="Permalink to &quot;检验何种假设&quot;">​</a></h2><p>中介效应和调节效应是计量经济学中常用的概念，用于解释因果关系中的中介机制和调节条件。它们可以通过统计方法进行检验，以验证相关的假设。</p><h3 id="机制检验" tabindex="-1">机制检验 <a class="header-anchor" href="#机制检验" aria-label="Permalink to &quot;机制检验&quot;">​</a></h3><p>中介效应提供了解释自变量与因变量之间关系的机制和路径。</p><p>要验证一个变量（中介变量）在自变量和因变量之间扮演着的中介角色，解释了二者之间的关系。</p><blockquote><p>工作经验对就业薪资的影响，其中职业技能水平被认为是中介变量。在这个例子中，自变量是工作经验，因变量是就业薪资，而中介变量是职业技能水平。</p><p>中介效应假设认为工作经验通过职业技能水平对就业薪资产生作用。</p><p>自变量（X）和因变量（Y） , 中介变量（Mediator）</p><p>自变量（X）通过中介变量（Mediator）对因变量（Y）起作用。</p></blockquote><h3 id="边界条件" tabindex="-1">边界条件 <a class="header-anchor" href="#边界条件" aria-label="Permalink to &quot;边界条件&quot;">​</a></h3><p>在调节效应的检验中，我们关注的是自变量与因变量之间的关系是否受到其他变量的调节。</p><blockquote><p>在什么情况下，自变量（X）和因变量（Y）的关系更强或是更弱？</p><p>学习时间对学习成绩的影响，其中学习动机被认为是调节变量。</p><p>自变量是学习时间（X），因变量是学习成绩（Y），而调节变量是学习动机（Modetator）。</p><p>调节效应假设认为学习动机对工作经验与学习成绩之间的关系产生调节作用。在学生产生自主学习动机（Modetator）时，学习时间（X）与学习成绩（Y）之间的关系得到加强。</p></blockquote><p>研究调节效应以及其现实意义的原因：</p><ol><li>不同个体之间产生差异。通过探索调节变量，我们可以发现在什么情况下自变量对因变量的影响更加强或更加弱，从而解释了个体之间的差异。【异质性分析】</li><li>了解调节变量可以帮助我们确定哪些因素会改变自变量与因变量之间的关系强度或方向。这样，我们可以有针对性地设计干预措施，并针对不同调节条件进行定制，以提高干预的效果和成功率。</li><li>通过探索调节变量，这些发现能够丰富和扩展现有的理论框架，为学术界提供更全面和准确的理论解释。（什么条件下成立？）</li></ol><h2 id="调节变量如何选择" tabindex="-1">调节变量如何选择 <a class="header-anchor" href="#调节变量如何选择" aria-label="Permalink to &quot;调节变量如何选择&quot;">​</a></h2><h3 id="理论基础" tabindex="-1">理论基础 <a class="header-anchor" href="#理论基础" aria-label="Permalink to &quot;理论基础&quot;">​</a></h3><p>调节变量的选择应该基于相关的理论基础。理论上，我们可能有关于哪些因素会影响自变量与因变量之间关系的假设。根据理论框架，我们可以提出可能的调节变量，并基于理论合理性来选择。</p><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph LR;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A[管理者自利]--&gt;B[掏空企业行为]</span></span></code></pre></div><p>基于代理理论，在代理关系中，管理者作为代理人，负责执行公司的决策和管理任务，而股东或公司所有者则作为委托人。</p><p>管理者有自利倾向，管理者可能追求个人利益，如获取高额薪酬、权力扩大或私人利益，而忽视了公司的长期利益和股东价值。</p><blockquote><p><strong>激励不一致：</strong> 当管理者的个人利益与公司利益不一致时，管理者可能会掏空企业。</p><p><strong>监管不足：</strong> 如果缺乏有效的监管机制或制衡措施，管理者可能面临较少的监督和约束。</p></blockquote><p>调节变量选择：基于代理理论的推理</p><blockquote><p>薪酬设定：薪酬设定作为调节</p><p>公司治理：强化监管（引入机构投资者、外部监督、内部监督）作为调节</p></blockquote><h3 id="检验因果效应" tabindex="-1">检验因果效应 <a class="header-anchor" href="#检验因果效应" aria-label="Permalink to &quot;检验因果效应&quot;">​</a></h3><h2 id="中介效应的检验方法" tabindex="-1">中介效应的检验方法 <a class="header-anchor" href="#中介效应的检验方法" aria-label="Permalink to &quot;中介效应的检验方法&quot;">​</a></h2><p>中介作用是研究X对Y的影响时，是否会先通过中介变量M，再去影响Y；即是否有X-&gt;M-&gt;Y这样的关系，如果存在此种关系，则说明具有中介效应。比如工作满意度（X）会影响到创新氛围（M）,再影响最终工作绩效（Y），此时创新氛围就成为了这一因果链当中的中介变量。</p><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph LR;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A[自变量X]--&gt;B[中介变量M]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  B--&gt;C[因变量Y]</span></span></code></pre></div><div class="language-STATA vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">STATA</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y X </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> M X</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Y X M</span></span></code></pre></div><ul><li><p>X,Y是主效应；M是中介变量</p></li><li><p>逐步检验回归系数的方法分为三步 (温忠麟等，2004)：</p></li><li><ul><li>第一步：检验方程 自变量 X 对因变量 Y 的总效应；</li><li>第二步：检验方程 自变量 X 和 中介变量 M 的关系；</li><li>第三步：控制中介变量 M 后自变量 X 对因变量 Y 的系数 b ;</li></ul></li><li><p><strong>support</strong>：经理的激励，自变量，连续变量</p></li><li><p><strong>perform</strong>：员工的工作表现，因变量，连续变量</p></li><li><p><strong>satis</strong>：员工的工作满意度，中介变量，连续变量</p></li></ul><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph LR;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  A[support]--&gt;B[satis]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  B--&gt;C[perform]</span></span></code></pre></div><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  gsem_multmed.dta,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">clear</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> perform support    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//分析 x 和 y 之间的关系</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> satis support      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//分析 x 和 m 之间的关系</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> perform satis support     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 加入 m，看 x 和 y 之间的关系</span></span></code></pre></div><p><strong>注意：需要加上控制变量</strong></p><ul><li><strong>因果推断经验研究中的中介效应与调节效应</strong>；中国工业经济</li></ul><blockquote><p>二是根据经济学理论,提出一个或几个能够反映 D对Y的作用渠道的中介变量 M。M对Y的影响应该是直接而显然的,采用和第一条中同样的方法识别 D 对 M 的因果关系。</p></blockquote><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  gsem_multmed.dta,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">clear</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> perform support    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//分析 x 和 y 之间的关系</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> satis support      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//分析 x 和 m 之间的关系</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> perform satis support     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 加入 m，看 x 和 y 之间的关系</span></span></code></pre></div><h2 id="调节效应的检验方法" tabindex="-1">调节效应的检验方法 <a class="header-anchor" href="#调节效应的检验方法" aria-label="Permalink to &quot;调节效应的检验方法&quot;">​</a></h2><ul><li>异质性分析: 异质性（heterogeneity）其实就是差异、差别。不同组别，效应是否存在差异。</li></ul><p>调节作用是研究X对Y的影响时，是否会受到调节变量M的干扰。</p><h3 id="交互项" tabindex="-1">交互项 <a class="header-anchor" href="#交互项" aria-label="Permalink to &quot;交互项&quot;">​</a></h3><p>$y = \beta_1x_1 + \beta_2x_2 + \beta_3 x_1 * x_2 + \beta_4 control + \mu$</p><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ssc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> install center</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">center x1 x2</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> interaction </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">c_x1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">c_x2</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">global</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> control</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x3 x4 x5 </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">reg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y x1 x2 interaction </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">control</span></span></code></pre></div><ul><li>实际案例</li></ul><blockquote><p>而同时公司所处<strong>行业竞争程度</strong>也是公司面临的重要的外部治理机制,那么<strong>行业竞争状况</strong>是否会影响董事会断裂带与股<strong>价崩盘风险</strong>之间的关系呢?</p><p>一方面,在竞争激烈的行业中,市场资源的有限性会导致企业为了抢夺更多的信息和资源而充分披露内部消息,增强公司信息透明度(曾伟强等2016)。……</p><p>随后,探究其对董事会断裂带和股价崩盘风险之间关系的影响。</p></blockquote><p>那么<strong>行业竞争状况</strong>(调节变量M)是否会影响**董事会断裂带（X）<strong>与</strong>股价崩盘风险(Y)**之间的关系呢?</p><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Fs_hhi3</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Fstrengh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dhhi3 </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/*Interaction*/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">logit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> F1crash4e Fstrengh Fs_hhi3 dhhi3 adturne ncskewe sigmae ameanwre size pb_cs lev currentratio roe accm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">sh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cr2_5 index_2014 Y2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Y10 Ind2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Ind21</span></span></code></pre></div><p>表述：那么……(调节变量M)是否会影响**……（X）<strong>与</strong>……(Y)**之间的关系呢?</p><p><strong>结果判断：</strong></p><p>主效应显著（X）,交互项显著（interaction）</p><p>$y = \beta_1x_1 + \beta_2x_2 + \beta_3 x_1 * x_2 + \beta_4 control + \mu$</p><table><thead><tr><th>符号</th><th style="text-align:center;"><strong>结果</strong></th><th style="text-align:center;"><strong>解释</strong></th></tr></thead><tbody><tr><td><strong>相同</strong></td><td style="text-align:center;">主效应显著为正；交互项显著为正</td><td style="text-align:center;">调节效应强化主效应（X与Y）的正相关关系</td></tr><tr><td></td><td style="text-align:center;">主效应显著为负；交互项显著为负</td><td style="text-align:center;">调节效应强化主效应（X与Y）的负相关关系</td></tr><tr><td><strong>相反</strong></td><td style="text-align:center;">主效应显著为<strong>负</strong>；交互项显著为<strong>正</strong></td><td style="text-align:center;">调节效应<strong>弱化</strong>主效应（X与Y）的<strong>负</strong>相关关系</td></tr><tr><td></td><td style="text-align:center;">主效应显著为<strong>正</strong>；交互项显著为<strong>负</strong></td><td style="text-align:center;">调节效应<strong>弱化</strong>主效应（X与Y）的<strong>正</strong>相关关系</td></tr></tbody></table><h3 id="分组回归" tabindex="-1">分组回归 <a class="header-anchor" href="#分组回归" aria-label="Permalink to &quot;分组回归&quot;">​</a></h3><blockquote><p>如前文所述，信息不对称是引起企业内部薪酬差距拉大的干扰因素，那么税收征管数字化对企业内部薪酬差距的治理效应可能会<strong>在信息不对称程度不同的企业中有所差异</strong> 。 企业的内部控制质量越高、外部审计监督越严格，企业的信息不对称问题越小，此时，可以预期税收征管数字化对企业内部薪酬差距的治理效应也越小。 具体而言，本文选择“迪博·中国上市公司内部控制指数”作为内部控制质量的代理变量，内部控制指数越高，公司内部治理机制越完善。</p></blockquote><div class="language-stata vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">stata</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bysort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ind year:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">egen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mediannei</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">median</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(内部控制指数)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> index</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> index</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 内部控制指数 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mediannei</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> index</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 内部控制指数 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mediannei</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">xtreg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gap gtp size lev roa labor age cash indratio top1 soe olddep avgwage lnpgdp </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">year </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ind </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prov </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> index</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,fe </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">vce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cluster code) </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">xtreg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gap gtp size lev roa labor age cash indratio top1 soe olddep avgwage lnpgdp </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">year </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ind </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">i.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prov </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> index</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,fe </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">vce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cluster code)</span></span></code></pre></div><p>表7中第（1）、（2）列的结果显示，税收征管数字化（gtp）对企业内部薪酬差距（gap）的治理效应仅在内部控制质量低的样本中显著，这表明当企业内部控制质量低而信息不对称问题严重时，税收征管数字化对企业内部薪酬差距能够发挥更明显的治理效应。 …… 综合看，上述发现还在一定程度上意味着，税收征管数字化与内部控制和外部审计在抑制企业内部薪酬差距时具有一定的替代关系，当企业内部控制质量较低和外部审计监督不力时，税收征管数字化能够缩小信息不对称问题引致的企业内部薪酬差距，这为前文基于信息环境视角的机制分析提供了进一步的实证支持。</p><h1 id="参考内容" tabindex="-1">参考内容 <a class="header-anchor" href="#参考内容" aria-label="Permalink to &quot;参考内容&quot;">​</a></h1><ul><li><p>梁上坤,徐灿宇,王瑞华.董事会断裂带与公司股价崩盘风险[J].中国工业经济,2020,No.384(03):155-173.</p></li><li><p>虞义华,赵奇锋,鞠晓生.发明家高管与企业创新[J].中国工业经济,2018,No.360(03):136-154.</p></li><li><p>郭玥.政府创新补助的信号传递机制与企业创新[J].中国工业经济,2018,No.366(09):98-116.</p></li><li><p>江艇.因果推断经验研究中的中介效应与调节效应[J].中国工业经济,2022,No.410(05):100-120.DOI:10.19581/j.cnki.ciejournal.2022.05.005.</p></li><li><p>Heckman J J. Sample selection bias as a specification error[J]. Econometrica: Journal of the econometric society, 1979: 153-161.</p></li><li><p>Abadie, A., Diamond, A., and J. Hainmueller. 2014. Comparative Politics and the Synthetic Control Method. American Journal of Political Science</p></li><li><p>Abadie, A., Diamond, A., and J. Hainmueller. 2010. Synthetic Control Methods for Comparative Case Studies: Estimating the Effect of California&#39;s Tobacco Control Program. Journal of the American Statistical Association</p></li><li><p>Abadie, A. and Gardeazabal, J. 2003. Economic Costs of Conflict: A Case Study of the Basque Country. American Economic Review</p></li><li><p>Vanderbei, R.J. 1999. LOQO: An interior point code for quadratic programming. Optimization Methods and Software 11: 451-484.</p></li><li><p>Naidu D, Ranjeeni K. Effect of coronavirus fear on the performance of Australian stock returns: Evidence from an event study[J]. Pacific-Basin Finance Journal, 2021(3):101520.</p></li><li><p>Heyden K J, Heyden T. Market reactions to the arrival and containment of COVID-19: an event study[J]. Finance research letters, 2021, 38: 101745.</p></li><li><p><a href="https://mp.weixin.qq.com/s/OQjj9YKFT-FefHrnbUzKbw" target="_blank" rel="noreferrer">内生性！内生性！解决方法大集合</a></p></li><li><p><a href="https://stata-club.github.io/stata_article/2017-03-23.html" target="_blank" rel="noreferrer">重要的事情说三遍，重要的数据留一个</a></p></li><li><p><a href="https://www.lianxh.cn/news/0764bf4c5f32b.html" target="_blank" rel="noreferrer">君生我未生！Stata结果输出：论文四表一键出</a></p></li><li><p><a href="https://stata-club.github.io/%E6%8E%A8%E6%96%87/20161117/" target="_blank" rel="noreferrer">日期函数大汇总（一）</a></p></li><li><p><a href="https://zhuanlan.zhihu.com/p/94346312" target="_blank" rel="noreferrer">计量经济学-伍德里奇-第三章-回归-基础</a></p></li><li><p><a href="https://zhuanlan.zhihu.com/p/99435552" target="_blank" rel="noreferrer">Stata+R: 一文读懂中介效应分析</a></p></li><li><p><a href="https://www.lianxh.cn/news/3820f71099fd9.html" target="_blank" rel="noreferrer">Stata：一文读懂事件研究法Event Study</a></p></li><li><p><a href="https://zhuanlan.zhihu.com/p/92325652" target="_blank" rel="noreferrer">合成控制法 (Synthetic Control Method) 及 Stata实现</a></p></li><li><p><a href="https://www.lianxh.cn/news/32ae13ec789a1.html#:~:text=%E8%AE%BA%E6%96%87%E4%B8%AD%EF%BC%8C%E6%88%91%E4%BB%AC%E5%B8%B8%E5%B8%B8%E8%A6%81%E6%B1%82,%E6%89%80%E5%BE%97%E7%9A%84%E7%BB%93%E8%AE%BA%E6%98%AF%E5%90%A6%E5%8F%AF%E9%9D%A0%E3%80%82" target="_blank" rel="noreferrer">稳健性检验！稳健性检验</a></p></li><li><p><a href="https://www.zhihu.com/question/53204653" target="_blank" rel="noreferrer">怎么用通俗易懂的语言解释Heckman 两阶段模型的两个方程？</a></p></li><li><p><a href="https://zhuanlan.zhihu.com/p/443337324" target="_blank" rel="noreferrer">工具变量的回归操作与检验stata</a></p></li><li><p><a href="https://zhuanlan.zhihu.com/p/366423108" target="_blank" rel="noreferrer">双重差分法（DID）安慰剂检验的做法：随机抽取500次?</a></p></li><li><p><a href="https://www.lianxh.cn/news/0a63a4fb8eb70.html" target="_blank" rel="noreferrer">多期DID之安慰剂检验、平行趋势检验</a></p></li></ul></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-5941af80><!--[--><!--]--><!----><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"endproblem_(3) 倾向性得分匹配(psm).md\":\"DuyI8tp-\",\"endproblem_(5) did共同趋势检验及stata实现.md\":\"DjDWa1WQ\",\"pythontextanalysis_关于文本分析的简单介绍.md\":\"DnZdgZm3\",\"pythonpakage_python中的12小节蓝调musicpy.md\":\"ox10HEGu\",\"pythonpakage_微信截图获取鼠标指针位置pyautogui.md\":\"D2RhlTkV\",\"selfintro_更新了一下我的网络小站.md\":\"CB_DjLLd\",\"pythonpakage_python与stata实现三种t检验.md\":\"B2cbERj-\",\"selfintro_机器学习计量经济学关系与区别.md\":\"Byovgdr1\",\"question_相关系数为正与回归系数为负，发生了什么？.md\":\"DHj8pNJw\",\"selfintro_新年快乐，也立点flag！今年好好更新视频.md\":\"DWFRflFq\",\"pythonpakage_python与stata实现固定效应.md\":\"_Nf0J94s\",\"pythonintro_函数.md\":\"MSR1lFiu\",\"pythonintro_python的简单介绍.md\":\"a8aTLV_i\",\"pythontextanalysis_获取txt文件的编码格式.md\":\"CsMVl1FL\",\"endproblem_(1) 工具变量法.md\":\"DndfCqNt\",\"pythontextanalysis_文本余弦相似度计算.md\":\"BCI53-R9\",\"question_为什么变量会被omit掉？如何解决？.md\":\"5JpynGTN\",\"pythonintro_os模块；批量修改文件名.md\":\"ujglt0mb\",\"question_关于控制变量.md\":\"B7TGZ89W\",\"selfintro_有关企业高管的研究.md\":\"B-YBpHqU\",\"selfintro_高管研究的经典文献the_organization_as_a_reflection_of_its_top_managers（1984）.md\":\"CMAh2moU\",\"stataintro_stata的areg命令讲解.md\":\"VpcBkXEq\",\"medmod_调节效应与stata实现.md\":\"BD11cbcm\",\"endproblem_(3) 逐年psm.md\":\"DpIu_9K1\",\"question_论文回归结果不显著怎么办？.md\":\"cj2qZVQj\",\"pythonintro_数值类型介绍，文本与数值.md\":\"ClreKAeT\",\"question_寻找工具变量的几种逻辑.md\":\"CXhjjYjm\",\"question_控制变量不显著可以删去吗？.md\":\"DleeBg25\",\"endproblem_(5) did(双重差分).md\":\"B7F-WycH\",\"question_深度学习与管理学应用——个人分享.md\":\"BzUgzq9b\",\"endproblem_(工具变量法)如何寻找工具变量.md\":\"DSLVocbP\",\"question_为什么存在医患矛盾——委托代理理论.md\":\"DZJAgZQx\",\"stataintro_对比两个数据集的差异.md\":\"Da4UOQTw\",\"endproblem_(7) 断点回归(rdd).md\":\"D_4C7R3C\",\"pythonspider_简单理解网页结构(html).md\":\"DPtqWmRE\",\"spssintro_频率统计.md\":\"CWzIMI52\",\"pythonpakage_python(stata)实现ols回归(稳健标准误).md\":\"CUDBoUpw\",\"stataintro_help帮助文档——stata入门.md\":\"C6mE7CLj\",\"stataintro_stata实现分组回归系数的比较.md\":\"CP6Q4-8y\",\"medmod_绘制二次项的调节作用图.md\":\"DT_vaAXM\",\"statadraw_图片格式png、svg——_stata绘图.md\":\"CrvzKvgG\",\"statadraw_核密度图.md\":\"YvnNzF_c\",\"question_模型的r2偏小是一个问题吗？.md\":\"D909r3u8\",\"endproblem_(2) 固定效应模型.md\":\"Dfhb2c12\",\"question_p值？t值？假设检验.md\":\"Aa1ZOfnd\",\"selfintro_计量经济学教材推荐.md\":\"DXHAJOI8\",\"endproblem_如何区分样本选择与样本自选择问题.md\":\"Cfp3EduT\",\"medmod_(调节效应)交互项与分组回归有什么区别？.md\":\"B2qw3eQW\",\"question_什么叫估计量的无偏性？一致性？有效性？.md\":\"DByhg6g3\",\"question_管理学研究中文本分析常用数据库.md\":\"DAu44vL8\",\"selfintro_stata入门与进阶的资料.md\":\"WejDK6fm\",\"pythonpakage_python.win32com处理word论文格式排版.md\":\"CRlfSnZk\",\"statadraw_面板数据折线图(xtline)——stata绘图.md\":\"D_GajV6X\",\"spssintro_逻辑运算.md\":\"B_hJT4tB\",\"stataintro_多元回归(reg).md\":\"DR1ftZ1S\",\"pythonpakage_读取较大的excel文件.md\":\"CqV09B-I\",\"endproblem_(6) 简单理解广义矩估计(gmm).md\":\"7ah02lDd\",\"model_关于倒u型关系的形成机制.md\":\"D5vPAvJ1\",\"paneldata_行业效应、地区效应、时间固定效应.md\":\"Dh4SCCc1\",\"stataintro_导出数据为excel文件.md\":\"C8faHSpt\",\"stataintro_stata数据浏览器列宽——stata操作.md\":\"CdGoujwT\",\"paneldata_面板数据工具变量法.md\":\"C0_SFKpb\",\"medmod_直接绘制二次项调节作用图_——stata绘图.md\":\"DMot3TC1\",\"pythonspider_用python获取网页代码.md\":\"DiPz5GCD\",\"question_do(dta)文件乱码怎么办？.md\":\"D08tAh9-\",\"pythonintro_python的安装.md\":\"Dj1MHj9X\",\"pythonintro_安装包_pip【python入门】.md\":\"BdjUd_pf\",\"pythonpakage_自动识别讲座、访谈录音whisper语音识别.md\":\"BsHsI675\",\"model_probit模型在论文中的应用—以《什么样的杠杆率有利于企业创新》为例.md\":\"v9tNQBb_\",\"endproblem_did原理与stata实现.md\":\"DU-Ut_GC\",\"stataintro_生成虚拟变量.md\":\"CE1MGSr3\",\"question_虚拟变量.md\":\"DKH-BXCq\",\"stataintro_stata实现滚动窗口回归(asreg).md\":\"BBdqCQ91\",\"pythonpakage_python中介中心性计算.md\":\"DtwK1ow6\",\"spssintro_关系表达式.md\":\"CmiyUN7_\",\"paneldata_修正组间异方差、组内自相关、截面相关(操作).md\":\"D4jipmFy\",\"pythonintro_dict字典.md\":\"CeVzRueZ\",\"pythontextanalysis_利用搜狗扩展分词词库.md\":\"Cr15-8-q\",\"question_经济学上的安慰剂检验.md\":\"BySPVn24\",\"statadraw_折线图.md\":\"2vGvBXWu\",\"stataintro_字符串的截取.md\":\"BHSm08Hh\",\"pythonpakage_用python模拟检验ols的性质.md\":\"DFomToZe\",\"selfintro_stata、实证_gpt_prompt（指令）编写指南.md\":\"CA3e-oIt\",\"paneldata_什么是面板数据？.md\":\"BcGvr54A\",\"spssintro_单样本t检验.md\":\"5NuJhGt0\",\"endproblem_(4) heckman两阶段stata操作.md\":\"C4cuHRgX\",\"stataintro_stata实现长宽数据转换（reshape_gather_spread）.md\":\"BBB8-R-a\",\"stataintro_循环(loop).md\":\"BFRccZfp\",\"model_零膨胀泊松模型.md\":\"i2uTtvdX\",\"question_条件期望_e(yx).md\":\"l8eWiEfW\",\"stataintro_离群值(极端值)与stata处理.md\":\"DugDWwKz\",\"question_0_1变量需要中心化吗？.md\":\"CKdJpzIm\",\"pythonpakage_python画出疫情的传播路线图.md\":\"BjHiq7Qt\",\"stataintro_stata命令reghdfe(高维固定效应回归).md\":\"CjMi5Vce\",\"spssintro_按照多个变量排序.md\":\"D-dBCNRf\",\"stataintro_在回归中自动生成交互项.md\":\"B688GiR2\",\"stataintro_导出结果(3)t检验表格.md\":\"Br0OJy2g\",\"stataintro_结果中不报告年度、_行业虚拟变量的系数_——stata入门.md\":\"D75FZ2GZ\",\"endproblem_如何用psm(倾向性得分)匹配的样本进行回归.md\":\"YX3hZCuM\",\"paneldata_固定效应还是随机效应？面板数据回归.md\":\"VYMO2kg9\",\"spssintro_算术运算（计算变量）.md\":\"sVC-GTwg\",\"stataintro_wind(万得)数据转化为面板格式.md\":\"7g9lsVYE\",\"selfintro__utd24ft50_是什么？.md\":\"RejaEZq2\",\"pythontextanalysis_字符的全半角转换.md\":\"DKtPk1Ow\",\"stataintro_分组计算.md\":\"Bg_6GsUc\",\"writing_关于文献的检索.md\":\"D4qnQBje\",\"model_二值选择模型（logit与probit）.md\":\"ZJZNu5NF\",\"stataintro_求和egen_sum_gen_sum_的区别.md\":\"DrpF5FGQ\",\"paneldata_三种估计方法的stata操作.md\":\"B5MZwFwd\",\"paneldata_滞后变量回归.md\":\"Ct--LIeC\",\"stataintro_导入数据.md\":\"DguAvKXT\",\"question_为什么会乱码？.md\":\"DMHicfVA\",\"stataintro_pca主成分分析——_stata入门.md\":\"2nfqdUrH\",\"statadraw_绘制双y轴图像.md\":\"otiBJWFo\",\"pythontextanalysis_年报文本处理.md\":\"D9RDzugE\",\"pythonspider_提取网页需要的内容.md\":\"BY6D5f8b\",\"stataintro_字符串的替换与分割.md\":\"BPfqZciV\",\"pythontextanalysis_词频（自定义短语）.md\":\"DknOkczh\",\"pythonspider_爬虫的注意事项.md\":\"skfvuO8D\",\"selfintro_r、stata、python区别与选择.md\":\"CgmaEsMS\",\"spssintro_个案排秩.md\":\"BT_xUhsu\",\"tools_文本纠错.md\":\"C-4HALqc\",\"stataintro_行业中位数调整_——在stata剔除行业效应.md\":\"CJAHmthV\",\"spssintro_导入与创建数据.md\":\"DZ1bjwcE\",\"spssintro_变量的重新编码.md\":\"BC05eM-r\",\"writing_了解论文结构；浏览文献.md\":\"D7asQK4l\",\"stataintro_给股票代码补零.md\":\"edU8gFsY\",\"endproblem_简单理解内生性.md\":\"o1RcJAD6\",\"pythonpakage_python实现微软_文本转语音edge-tss.md\":\"YWYk4_zp\",\"stataintro_制作分组描述性统计表格.md\":\"CI0QITog\",\"writing_关于论文排版的工具.md\":\"DkCA6END\",\"selfintro_计量经济学常用资料查找方式.md\":\"C3jVO_XI\",\"spssintro_分组统计.md\":\"BRXZt-m0\",\"question_回答私信里常问的问题.md\":\"Cz20itZm\",\"stataintro_(分行业，分年份，分企业性质)分组回归.md\":\"CXxv7hdu\",\"stataintro_处理重复样本.md\":\"BhMp0dLn\",\"stataintro_纵向合并数据(append).md\":\"Bxx4Dahs\",\"stataintro_stata报错处理——variable_not_foundno_observations.md\":\"ZEXIT4_Y\",\"pythonpakage_在python中调用stata.md\":\"ChxjEu1F\",\"stataintro_缩尾截尾.md\":\"Bm_1P6hv\",\"selfintro_关于编程语言的一些理解(python_stata).md\":\"WyRKYmGK\",\"stataintro_样本的保留与删除.md\":\"BgsZMN8l\",\"medmod_中介效应检验存在的问题.md\":\"8hBcJ_3C\",\"stataintro_理解merge合并数据.md\":\"Cbdhj9u7\",\"stataintro_如何去掉ststpt_的样本？——stata入门.md\":\"BbkUI4yx\",\"question_cluster？robust？关于标准误的选取.md\":\"CoHvJFbB\",\"spssintro_满足条件的计算.md\":\"CheFhQcX\",\"pythonpakage_python_win32com包的使用pptx转pngjpg.md\":\"GFTZB6I2\",\"paneldata_简单理解组间异方差、组内自相关、截面相关.md\":\"r0wH0FQ5\",\"stataintro_导出结果(4)回归结果表格.md\":\"CiBmuehv\",\"stataintro_合并数据(merge).md\":\"DMEDMmEM\",\"medmod_调节效应——需要注意的问题.md\":\"DQEhNaVw\",\"stataintro_根据变量将样本n等分.md\":\"Brmziq52\",\"model_tobit模型与stata实现.md\":\"BL0NaDDr\",\"stataintro_esttab导出latex格式表格——stata入门.md\":\"CcAtQMyh\",\"stataintro_导出结果(2)相关系数表.md\":\"Bdb7acEe\",\"endproblem_(5) 多时点(多期)did的stata实现.md\":\"DN6X24VW\",\"model_计数模型(泊松回归).md\":\"D6s2f5KG\",\"stataintro_导出结果(1)描述性统计.md\":\"CdI_fyDR\",\"stataintro_将显示界面调成黑色.md\":\"DuNJPcE1\",\"stataintro_面板差分(今年减去年).md\":\"CZafL9Bm\",\"medmod_绘制调节作用图.md\":\"BSVdKxSp\",\"selfintro_推荐的python入门视频.md\":\"5RX_Tfoz\",\"stataintro_基础运算(egen_均值标准差等).md\":\"CeaakjtO\",\"pythonpakage_numpy与线性代数.md\":\"Cc_EiWET\",\"question_模型中加入无关变量会怎么样？.md\":\"CnDwsfPD\",\"paneldata_stata检验组间异方差、组内自相关、截面相关.md\":\"CSfGJ6OT\",\"medmod_stata实现面板数据的中介效应.md\":\"CbdM0VSZ\",\"spssintro_独立样本t检验.md\":\"CZ-u88Ir\",\"selfintro_常用的数据来源.md\":\"zNqfdt-H\",\"pythonintro_list列表.md\":\"CY2nd2cC\",\"stataintro_stata分组计算(by_bysort).md\":\"D9PBNAts\",\"stataintro_dofile的使用.md\":\"BhHQq9Wv\",\"stataintro_调节结果窗口以及do文件字体大小.md\":\"ztu3l4R2\",\"stataintro_随机种子？stata中set_seed有什么用？.md\":\"CYc5SRor\",\"endproblem_(3) psm操作.md\":\"DF8vcIHu\",\"pythontextanalysis_简体与繁体转换.md\":\"DzPYaHrB\",\"stataintro_批量给csmar(国泰安)导出数据贴标签(2).md\":\"D-gDm_q-\",\"pythontextanalysis_python实现pdf转txt.md\":\"DJbcuhtq\",\"stataintro_xi_i._回归中自动生成虚拟变量.md\":\"Dr2Dnscm\",\"model_probit和logit模型的边际效应与stata实现.md\":\"BObLTSNJ\",\"stataintro_正则表达式——stata中的文本处理.md\":\"DOuRTaNU\",\"selfintro_还是要好好掌握计量理论.md\":\"waJ2dfH9\",\"pythontextanalysis_词频统计.md\":\"CcxVlYkj\",\"paneldata_面板(xt)logitprobit.md\":\"C-3ozbhx\",\"medmod_中介效应与stata实现.md\":\"D976o-Tg\",\"stataintro_为什么去掉金融行业、ptst的样本【常见问题】.md\":\"9vFAQi0s\",\"stataintro_日期格式处理.md\":\"B2C-Pwg9\",\"question_豪斯曼检验_(hausman_test)_出现负数结果怎么办？.md\":\"BARF4fev\",\"paneldata_面板数据移动平均数计算.md\":\"D4oja_Aa\",\"spssintro_描述性统计.md\":\"sNv4x_jc\",\"tools_获取ppt中所有图片.md\":\"CiF2SMzd\",\"stataintro_webuse报错.md\":\"DOf-4WAG\",\"stataintro_(多个)条件判断.md\":\"BLgUKTzk\",\"spssintro_按照单个变量排序.md\":\"6HMqLZPb\",\"endproblem_内生性处理方式总结.md\":\"DxEBdZ4Y\",\"writing_让ai辅助你写论文_statapython_latex__in_chatgpt.md\":\"BLJhYC8J\",\"stataintro_按照中位数（平均数）分组回归.md\":\"B8k6ziqE\",\"pythontextanalysis_tf-idf值是什么？.md\":\"DqRiNHtj\",\"stataintro_sfi.macro——stata__python交互.md\":\"BeYyDBNt\",\"tools_githubdesktop做stata版本管理.md\":\"CN5w3G6O\",\"support.md\":\"C-fTuila\",\"writing_识别英语常用搭配linggle.com.md\":\"B0a6VJ_3\",\"medmod_理解调节效应的结果.md\":\"DHHzujxW\",\"writing_word中画逻辑图.md\":\"CRvD2gd1\",\"stataintro_数据格式转换(format).md\":\"DiJhwdVB\",\"stataintro_(分组)获取回归的拟合值与残差项.md\":\"BL3FNHej\",\"paneldata_面板数据的三种估计方法.md\":\"Szx16E3z\",\"writing_管理类本科实证毕业论文简介与指南.md\":\"C2Nbvt4C\",\"pythonspider_简单理解爬虫.md\":\"BxnHJgi-\",\"spssintro_前言.md\":\"CywHKY9b\",\"stataintro_导出两阶段工具变量回归的回归结果.md\":\"CpGQ_gQA\",\"pythonspider_用python获取网页代码（2）.md\":\"CSVWPwlG\",\"pythonintro_ifelse条件判断.md\":\"CesfpEWC\",\"stataintro_快速了解数据集(describe_sumarize_tabulate).md\":\"8OdUK0js\",\"writing_chatgpt学术使用.md\":\"jwRpGbOZ\",\"tools_复制知网html网页中的文本.md\":\"CVVN9vRg\",\"statadraw_饼图.md\":\"BJsrMeE9\",\"question_如何对标准误进行两次聚类.md\":\"B0tznWrX\",\"stataputdocx_stata_putdocx.md\":\"CTrH7CH9\",\"stataintro_看懂stata多元回归(reg)结果.md\":\"DvGJcsu5\",\"statadraw_直方图.md\":\"CLkDqDkN\",\"stataintro_给数据贴标签(label).md\":\"DklmKpIu\",\"paneldata_repeated_time_values_within_panel.md\":\"C4CpVMAc\",\"stataintro_字符串类型与数值类型的转换.md\":\"DA9qcClU\",\"spssintro_秩的绑定值.md\":\"DHALjjH-\",\"pythonintro_forwhile循环.md\":\"CU9oWsip\",\"paneldata_非平衡面板.md\":\"C_keS0c6\",\"statadraw_绘制箱线图.md\":\"BQ-pbama\",\"paneldata_vif值（多重共线性）.md\":\"qkJySYg_\",\"stataintro_外部命令安装.md\":\"OV0KUPQ-\",\"question_相关系数、回归系数符号不一致——如何处理.md\":\"DBupNxXU\",\"endproblem_psm_did.md\":\"DwbgQdW8\",\"stataintro_排序.md\":\"CFXal9Gn\",\"statadraw_散点图.md\":\"DQwHMzSy\",\"stataintro_基础运算.md\":\"CXZnLIsD\",\"question_关于稳健性检验.md\":\"CnHKTN6d\",\"question_理论假设与实证结果相反.md\":\"DssIjvtv\",\"stataintro_stata实现固定效应_areg、reg、reghdfe、xtreg、有区别吗？.md\":\"BZ80QNbc\",\"tools_屏幕标注软件zoomit_gink.md\":\"BJhtL0Ek\",\"pythonpakage_python亲近中心性计算.md\":\"D6VlMyOx\",\"pythonpakage_python度中心性.md\":\"Hrg1GMmz\",\"pythonintro_一个python的网页笔记.md\":\"C58Hk9DM\",\"pythonpakage_stata与python交互.md\":\"CCGM6Wf6\",\"spssintro_分组描述性统计.md\":\"xNM4t-eO\",\"endproblem_(5) 多时点did.md\":\"BgF50J3i\",\"stataintro_导出相同样本量的描述性统计.md\":\"CnhltUpl\",\"stataintro_stata社会网络分析.md\":\"D4oBAC2g\",\"question_异方差及其后果、检验与处理.md\":\"Doit5JvV\",\"endproblem_(1)_(2) 面板数据工具变量法.md\":\"BMTEF_Wi\",\"writing_搜狗语言输入与自动纠错效率工具.md\":\"CnARR_2b\",\"writing_在word中通过键盘快速输入公式.md\":\"DMdUHFyL\",\"endproblem_(4) heckman两阶段回归.md\":\"BWz-WKXz\",\"writing_endnote的入门介绍如何写论文.md\":\"D769DlRu\",\"stataintro_local与global.md\":\"Difnsgrp\",\"statadraw_散点图加拟合线.md\":\"BoEh59gO\",\"pythonpakage_fraction（分数）模块.md\":\"BWAgSERO\",\"writing_关于论文的选题.md\":\"C3ql-dG-\",\"stataintro_批量给csmar(国泰安)导出数据贴标签（1）.md\":\"B452hKDl\",\"statadraw_制作年度分布图.md\":\"BnlS0GfO\",\"question_bootstrap(自助法).md\":\"D0sD0_BA\",\"stataintro_多重共线性与stata实现检验及处理.md\":\"N46TEVVN\",\"model_stata验证倒u或者u型关系.md\":\"DFxr2wqF\",\"model_有序logit(ologit)与stata实现.md\":\"UnYw92lJ\",\"writing_朗读论文检查错误基于微软文本转语音_的实践.md\":\"CwuYo05x\",\"writing_区分问题与主题.md\":\"CAnQHo_q\",\"index.md\":\"C2QkXR_v\",\"stataintro_理解append合并数据过程.md\":\"DjOA4wsL\",\"empiricalstudy.md\":\"L-ijHO-r\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Silencedream\",\"description\":\"一个分享想法与知识的小网站\",\"base\":\"/silencedream/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Stata\",\"items\":[{\"text\":\"Stata入门\",\"link\":\"/StataIntro/导入数据\"},{\"text\":\"Stata绘图\",\"link\":\"/StataDraw/制作年度分布图\"},{\"text\":\"Stata Putdocx\",\"link\":\"/Stataputdocx/stata_putdocx\"}]},{\"text\":\"Python\",\"items\":[{\"text\":\"入门操作\",\"link\":\"/PythonIntro/Python的简单介绍\"},{\"text\":\"文本分析\",\"link\":\"/PythonTextAnalysis/关于文本分析的简单介绍\"},{\"text\":\"网页爬虫\",\"link\":\"/PythonSpider/简单理解爬虫\"},{\"text\":\"包的应用\",\"link\":\"/PythonPakage/fraction（分数）模块\"}]},{\"text\":\"SPSS\",\"items\":[{\"text\":\"SPSS入门\",\"link\":\"/SPSSintro/前言\"}]},{\"text\":\"计量模型\",\"items\":[{\"text\":\"面板数据\",\"link\":\"/PanelData/什么是面板数据？\"},{\"text\":\"回归模型\",\"link\":\"/Model/二值选择模型（logit与probit）\"},{\"text\":\"内生性处理\",\"link\":\"/EndProblem/简单理解内生性\"},{\"text\":\"调节与中介\",\"link\":\"/MedMod/调节效应与Stata实现\"}]},{\"text\":\"其他内容\",\"items\":[{\"text\":\"常见问题\",\"link\":\"/Question/什么叫估计量的无偏性？一致性？有效性？\"},{\"text\":\"论文写作\",\"link\":\"/Writing/chatgpt学术使用\"},{\"text\":\"个人分享\",\"link\":\"/SelfIntro/_UTD24FT50_是什么？\"},{\"text\":\"常用工具\",\"link\":\"/Tools/复制知网HTML网页中的文本\"}]}],\"sidebar\":{\"/StataIntro/\":[{\"text\":\"Stata入门\",\"collapsed\":true,\"items\":[{\"text\":\"导入数据\",\"link\":\"/StataIntro/导入数据\"},{\"text\":\"webuse报错\",\"link\":\"/StataIntro/webuse报错\"},{\"text\":\"处理重复样本\",\"link\":\"/StataIntro/处理重复样本\"},{\"text\":\"对比两个数据集的差异\",\"link\":\"/StataIntro/对比两个数据集的差异\"},{\"text\":\"合并数据(merge)\",\"link\":\"/StataIntro/合并数据(merge)\"},{\"text\":\"纵向合并数据(append)\",\"link\":\"/StataIntro/纵向合并数据(append)\"},{\"text\":\"样本的保留与删除\",\"link\":\"/StataIntro/样本的保留与删除\"},{\"text\":\"缩尾截尾\",\"link\":\"/StataIntro/缩尾截尾\"},{\"text\":\"快速了解数据集(describe,sumarize,tabulate)\",\"link\":\"/StataIntro/快速了解数据集(describe,sumarize,tabulate)\"},{\"text\":\"基础运算\",\"link\":\"/StataIntro/基础运算\"},{\"text\":\"基础运算(egen,均值标准差等)\",\"link\":\"/StataIntro/基础运算(egen,均值标准差等)\"},{\"text\":\"给数据贴标签(label)\",\"link\":\"/StataIntro/给数据贴标签(label)\"},{\"text\":\"Wind(万得)数据转化为面板格式\",\"link\":\"/StataIntro/Wind(万得)数据转化为面板格式\"},{\"text\":\"数据格式转换(format)\",\"link\":\"/StataIntro/数据格式转换(format)\"},{\"text\":\"字符串的截取\",\"link\":\"/StataIntro/字符串的截取\"},{\"text\":\"字符串的替换与分割\",\"link\":\"/StataIntro/字符串的替换与分割\"},{\"text\":\"字符串类型与数值类型的转换\",\"link\":\"/StataIntro/字符串类型与数值类型的转换\"},{\"text\":\"生成虚拟变量\",\"link\":\"/StataIntro/生成虚拟变量\"},{\"text\":\"分组计算\",\"link\":\"/StataIntro/分组计算\"},{\"text\":\"(多个)条件判断\",\"link\":\"/StataIntro/(多个)条件判断\"},{\"text\":\"面板差分(今年减去年)\",\"link\":\"/StataIntro/面板差分(今年减去年)\"},{\"text\":\"排序\",\"link\":\"/StataIntro/排序\"},{\"text\":\"多元回归(reg)\",\"link\":\"/StataIntro/多元回归(reg)\"},{\"text\":\"看懂Stata多元回归(reg)结果\",\"link\":\"/StataIntro/看懂Stata多元回归(reg)结果\"},{\"text\":\"(分行业，分年份，分企业性质)分组回归\",\"link\":\"/StataIntro/(分行业，分年份，分企业性质)分组回归\"},{\"text\":\"(分组)获取回归的拟合值与残差项\",\"link\":\"/StataIntro/(分组)获取回归的拟合值与残差项\"},{\"text\":\"xi,i.,回归中自动生成虚拟变量\",\"link\":\"/StataIntro/xi,i.,回归中自动生成虚拟变量\"},{\"text\":\"制作分组描述性统计表格\",\"link\":\"/StataIntro/制作分组描述性统计表格\"},{\"text\":\"导出结果(1)描述性统计\",\"link\":\"/StataIntro/导出结果(1)描述性统计\"},{\"text\":\"导出结果(2)相关系数表\",\"link\":\"/StataIntro/导出结果(2)相关系数表\"},{\"text\":\"导出结果(3)T检验表格\",\"link\":\"/StataIntro/导出结果(3)T检验表格\"},{\"text\":\"导出结果(4)回归结果表格\",\"link\":\"/StataIntro/导出结果(4)回归结果表格\"},{\"text\":\"导出两阶段工具变量回归的回归结果\",\"link\":\"/StataIntro/导出两阶段工具变量回归的回归结果\"}]}],\"/StataDraw/\":[{\"text\":\"Stata绘图\",\"collapsed\":true,\"items\":[{\"text\":\"制作年度分布图\",\"link\":\"/StataDraw/制作年度分布图\"},{\"text\":\"折线图\",\"link\":\"/StataDraw/折线图\"},{\"text\":\"散点图\",\"link\":\"/StataDraw/散点图\"},{\"text\":\"散点图加拟合线\",\"link\":\"/StataDraw/散点图加拟合线\"},{\"text\":\"核密度图\",\"link\":\"/StataDraw/核密度图\"},{\"text\":\"直方图\",\"link\":\"/StataDraw/直方图\"},{\"text\":\"绘制双Y轴图像\",\"link\":\"/StataDraw/绘制双Y轴图像\"},{\"text\":\"绘制箱线图\",\"link\":\"/StataDraw/绘制箱线图\"},{\"text\":\"饼图\",\"link\":\"/StataDraw/饼图\"}]}],\"/Stataputdocx/\":[{\"text\":\"Stataputdocx\",\"collapsed\":true,\"items\":[{\"text\":\"stata_putdocx\",\"link\":\"/Stataputdocx/stata_putdocx\"}]}],\"/PythonIntro/\":[{\"text\":\"Python入门\",\"collapse\":false,\"items\":[{\"text\":\"Python的简单介绍\",\"link\":\"/PythonIntro/Python的简单介绍\"},{\"text\":\"Python的安装\",\"link\":\"/PythonIntro/Python的安装\"},{\"text\":\"安装包;pip\",\"link\":\"/PythonIntro/安装包;pip【python入门】\"},{\"text\":\"数值类型介绍，文本与数值\",\"link\":\"/PythonIntro/数值类型介绍，文本与数值\"},{\"text\":\"list列表\",\"link\":\"/PythonIntro/list列表\"},{\"text\":\"dict字典\",\"link\":\"/PythonIntro/dict字典\"},{\"text\":\"Ifelse条件判断\",\"link\":\"/PythonIntro/Ifelse条件判断\"},{\"text\":\"Forwhile循环\",\"link\":\"/PythonIntro/Forwhile循环\"},{\"text\":\"函数 \",\"link\":\"/PythonIntro/函数\"},{\"text\":\"OS模块；批量修改文件名\",\"link\":\"/PythonIntro/OS模块；批量修改文件名\"},{\"text\":\"一个Python的网页笔记\",\"link\":\"/PythonIntro/一个Python的网页笔记\"}]}],\"/PythonTextAnalysis/\":[{\"text\":\"Python入门\",\"collapse\":false,\"items\":[{\"text\":\"关于文本分析的简单介绍\",\"link\":\"/PythonTextAnalysis/关于文本分析的简单介绍\"},{\"text\":\"获取Txt文件的编码格式\",\"link\":\"/PythonTextAnalysis/获取Txt文件的编码格式\"},{\"text\":\"字符的全半角转换\",\"link\":\"/PythonTextAnalysis/字符的全半角转换\"},{\"text\":\"简体与繁体转换\",\"link\":\"/PythonTextAnalysis/简体与繁体转换\"},{\"text\":\"Python实现pdf转txt\",\"link\":\"/PythonTextAnalysis/Python实现pdf转txt\"},{\"text\":\"年报文本处理\",\"link\":\"/PythonTextAnalysis/年报文本处理\"},{\"text\":\"利用搜狗扩展分词词库\",\"link\":\"/PythonTextAnalysis/利用搜狗扩展分词词库\"},{\"text\":\"TF-IDF值是什么？\",\"link\":\"/PythonTextAnalysis/TF-IDF值是什么？\"},{\"text\":\"文本余弦相似度计算\",\"link\":\"/PythonTextAnalysis/文本余弦相似度计算\"}]}],\"/PythonSpider/\":[{\"text\":\"Python爬虫\",\"collapse\":false,\"items\":[{\"text\":\"简单理解爬虫\",\"link\":\"/PythonSpider/简单理解爬虫\"},{\"text\":\"简单理解网页结构(html)\",\"link\":\"/PythonSpider/简单理解网页结构(html)\"},{\"text\":\"用python获取网页代码\",\"link\":\"/PythonSpider/用python获取网页代码\"},{\"text\":\"用python获取网页代码（2）\",\"link\":\"/PythonSpider/用python获取网页代码（2）\"},{\"text\":\"提取网页需要的内容\",\"link\":\"/PythonSpider/提取网页需要的内容\"},{\"text\":\"爬虫的注意事项\",\"link\":\"/PythonSpider/爬虫的注意事项\"}]}],\"/PythonPakage/\":[{\"text\":\"Python包的使用\",\"collapse\":false,\"items\":[{\"text\":\"fraction（分数）模块\",\"link\":\"/PythonPakage/fraction（分数）模块\"},{\"text\":\"numpy与线性代数\",\"link\":\"/PythonPakage/numpy与线性代数\"},{\"text\":\"Python_win32com包的使用PPTX转PNGJPG\",\"link\":\"/PythonPakage/Python_win32com包的使用PPTX转PNGJPG\"},{\"text\":\"Python.win32com处理word论文格式排版\",\"link\":\"/PythonPakage/Python.win32com处理word论文格式排版\"},{\"text\":\"微信截图获取鼠标指针位置pyautogui\",\"link\":\"/PythonPakage/微信截图获取鼠标指针位置pyautogui\"},{\"text\":\"Python实现微软_文本转语音Edge-tss\",\"link\":\"/PythonPakage/Python实现微软_文本转语音Edge-tss\"},{\"text\":\"自动识别讲座、访谈录音whisper语音识别\",\"link\":\"/PythonPakage/自动识别讲座、访谈录音whisper语音识别\"},{\"text\":\"Python中的12小节蓝调musicpy\",\"link\":\"/PythonPakage/Python中的12小节蓝调musicpy\"},{\"text\":\"Python画出疫情的传播路线图\",\"link\":\"/PythonPakage/Python画出疫情的传播路线图\"},{\"text\":\"读取较大的excel文件\",\"link\":\"/PythonPakage/读取较大的excel文件\"},{\"text\":\"Python与Stata实现三种T检验\",\"link\":\"/PythonPakage/Python与Stata实现三种T检验\"},{\"text\":\"python与stata实现固定效应\",\"link\":\"/PythonPakage/python与stata实现固定效应\"},{\"text\":\"Python(stata)实现OLS回归(稳健标准误)\",\"link\":\"/PythonPakage/Python(stata)实现OLS回归(稳健标准误)\"},{\"text\":\"用Python模拟检验OLS的性质\",\"link\":\"/PythonPakage/用Python模拟检验OLS的性质\"},{\"text\":\"python中介中心性计算\",\"link\":\"/PythonPakage/python中介中心性计算\"},{\"text\":\"Python度中心性\",\"link\":\"/PythonPakage/Python度中心性\"},{\"text\":\"python亲近中心性计算\",\"link\":\"/PythonPakage/python亲近中心性计算\"},{\"text\":\"Stata与Python交互\",\"link\":\"/PythonPakage/Stata与Python交互\"},{\"text\":\"在Python中调用stata\",\"link\":\"/PythonPakage/在Python中调用stata\"}]}],\"/SPSSintro/\":[{\"text\":\"SPSS入门\",\"collapse\":false,\"items\":[{\"text\":\"前言\",\"link\":\"/SPSSintro/前言\"},{\"text\":\"导入与创建数据 \",\"link\":\"/SPSSintro/导入与创建数据 \"},{\"text\":\"变量的重新编码 \",\"link\":\"/SPSSintro/变量的重新编码 \"},{\"text\":\"描述性统计 \",\"link\":\"/SPSSintro/描述性统计 \"},{\"text\":\"频率统计 \",\"link\":\"/SPSSintro/频率统计 \"},{\"text\":\"分组描述性统计 \",\"link\":\"/SPSSintro/分组描述性统计 \"},{\"text\":\"分组统计 \",\"link\":\"/SPSSintro/分组统计 \"},{\"text\":\"按照单个变量排序 \",\"link\":\"/SPSSintro/按照单个变量排序 \"},{\"text\":\"按照多个变量排序 \",\"link\":\"/SPSSintro/按照多个变量排序 \"},{\"text\":\"算术运算（计算变量） \",\"link\":\"/SPSSintro/算术运算（计算变量） \"},{\"text\":\"逻辑运算\",\"link\":\"/SPSSintro/逻辑运算\"},{\"text\":\"关系表达式 \",\"link\":\"/SPSSintro/关系表达式 \"},{\"text\":\"满足条件的计算 \",\"link\":\"/SPSSintro/满足条件的计算 \"},{\"text\":\"单样本T检验 \",\"link\":\"/SPSSintro/单样本T检验 \"},{\"text\":\"独立样本T检验 \",\"link\":\"/SPSSintro/独立样本T检验 \"},{\"text\":\"个案排秩 \",\"link\":\"/SPSSintro/个案排秩 \"},{\"text\":\"秩的绑定值 \",\"link\":\"/SPSSintro/秩的绑定值 \"}]}],\"/PanelData/\":[{\"text\":\"PanelData\",\"collapse\":false,\"items\":[{\"text\":\"什么是面板数据？\",\"link\":\"/PanelData/什么是面板数据？\"},{\"text\":\"非平衡面板\",\"link\":\"/PanelData/非平衡面板\"},{\"text\":\"行业效应、地区效应、时间固定效应\",\"link\":\"/Pan,elData/行业效应、地区效应、时间固定效应\"},{\"text\":\"面板数据的三种估计方法\",\"link\":\"/PanelData/面板数据的三种估计方法\"},{\"text\":\"三种估计方法的Stata操作\",\"link\":\"/PanelData/三种估计方法的Stata操作\"},{\"text\":\"VIF值（多重共线性）\",\"link\":\"/PanelData/VIF值（多重共线性）\"},{\"text\":\"滞后变量回归\",\"link\":\"/PanelData/滞后变量回归\"},{\"text\":\"面板(xt)LogitProbit\",\"link\":\"/PanelData/面板(xt)LogitProbit\"},{\"text\":\"面板数据工具变量法\",\"link\":\"/PanelData/面板数据工具变量法\"},{\"text\":\"简单理解组间异方差、组内自相关、截面相关\",\"link\":\"/PanelData/简单理解组间异方差、组内自相关、截面相关\"},{\"text\":\"stata检验组间异方差、组内自相关、截面相关\",\"link\":\"/PanelData/stata检验组间异方差、组内自相关、截面相关\"},{\"text\":\"修正组间异方差、组内自相关、截面相关(操作)\",\"link\":\"/PanelData/修正组间异方差、组内自相关、截面相关(操作)\"},{\"text\":\"面板数据移动平均数计算\",\"link\":\"/PanelData/面板数据移动平均数计算\"},{\"text\":\"Repeated_time_values_within_panel报错\",\"link\":\"/PanelData/Repeated_time_values_within_panel\"}]}],\"/Model/\":[{\"text\":\"Python入门\",\"collapse\":false,\"items\":[{\"text\":\"二值选择模型（logit与probit）\",\"link\":\"/Model/二值选择模型（logit与probit）\"},{\"text\":\"Probit和Logit模型的边际效应与stata实现\",\"link\":\"/Model/Probit和Logit模型的边际效应与stata实现\"},{\"text\":\"Probit模型在论文中的应用—以《什么样的杠杆率有利于企业创新》为例\",\"link\":\"/Model/Probit模型在论文中的应用—以《什么样的杠杆率有利于企业创新》为例\"},{\"text\":\"有序logit(ologit)与Stata实现\",\"link\":\"/Model/有序logit(ologit)与Stata实现\"},{\"text\":\"TOBIT模型与Stata实现\",\"link\":\"/Model/TOBIT模型与Stata实现\"},{\"text\":\"计数模型(泊松回归)\",\"link\":\"/Model/计数模型(泊松回归)\"},{\"text\":\"零膨胀泊松模型\",\"link\":\"/Model/零膨胀泊松模型\"},{\"text\":\"关于倒U型关系的形成机制\",\"link\":\"/Model/关于倒U型关系的形成机制\"},{\"text\":\"Stata验证倒U或者U型关系\",\"link\":\"/Model/Stata验证倒U或者U型关系\"}]}],\"/EndProblem/\":[{\"text\":\"内生性处理\",\"collapse\":false,\"items\":[{\"text\":\"简单理解内生性\",\"link\":\"/EndProblem/简单理解内生性\"},{\"text\":\"(1) 工具变量法\",\"link\":\"/EndProblem/(1) 工具变量法\"},{\"text\":\"(工具变量法)如何寻找工具变量\",\"link\":\"/EndProblem/(工具变量法)如何寻找工具变量\"},{\"text\":\"(1)+(2) 面板数据工具变量法\",\"link\":\"/EndProblem/(1)+(2) 面板数据工具变量法\"},{\"text\":\"(2) 固定效应模型\",\"link\":\"/EndProblem/(2) 固定效应模型\"},{\"text\":\"(3) 倾向性得分匹配(PSM)\",\"link\":\"/EndProblem/(3) 倾向性得分匹配(PSM)\"},{\"text\":\"(3) PSM操作\",\"link\":\"/EndProblem/(3) PSM操作\"},{\"text\":\"(3) 逐年PSM\",\"link\":\"/EndProblem/(3) 逐年PSM\"},{\"text\":\"如何用PSM(倾向性得分)匹配的样本进行回归\",\"link\":\"/EndProblem/如何用PSM(倾向性得分)匹配的样本进行回归\"},{\"text\":\"(4) Heckman两阶段回归\",\"link\":\"/EndProblem/(4) Heckman两阶段回归\"},{\"text\":\"(4) Heckman两阶段Stata操作\",\"link\":\"/EndProblem/(4) Heckman两阶段Stata操作\"},{\"text\":\"如何区分样本选择与样本自选择问题\",\"link\":\"/EndProblem/如何区分样本选择与样本自选择问题\"},{\"text\":\"(5) DID(双重差分)\",\"link\":\"/EndProblem/(5) DID(双重差分)\"},{\"text\":\"DID原理与Stata实现\",\"link\":\"/EndProblem/DID原理与Stata实现\"},{\"text\":\"PSM+DID\",\"link\":\"/EndProblem/PSM+DID\"},{\"text\":\"(5) 多时点DID\",\"link\":\"/EndProblem/(5) 多时点DID\"},{\"text\":\"(5) 多时点(多期)DID的Stata实现\",\"link\":\"/EndProblem/(5) 多时点(多期)DID的Stata实现\"},{\"text\":\"(5) DID共同趋势检验及Stata实现\",\"link\":\"/EndProblem/(5) DID共同趋势检验及Stata实现\"},{\"text\":\"(6) 简单理解广义矩估计(GMM)\",\"link\":\"/EndProblem/(6) 简单理解广义矩估计(GMM)\"},{\"text\":\"(7) 断点回归(RDD)\",\"link\":\"/EndProblem/(7) 断点回归(RDD)\"},{\"text\":\"内生性处理方式总结\",\"link\":\"/EndProblem/内生性处理方式总结\"}]}],\"/MedMod/\":[{\"text\":\"调节与中介\",\"collapse\":false,\"items\":[{\"text\":\"中介效应与Stata实现\",\"link\":\"/MedMod/中介效应与Stata实现\"},{\"text\":\"Stata实现面板数据的中介效应\",\"link\":\"/MedMod/Stata实现面板数据的中介效应\"},{\"text\":\"中介效应检验存在的问题\",\"link\":\"/MedMod/中介效应检验存在的问题\"},{\"text\":\"调节效应与Stata实现\",\"link\":\"/MedMod/调节效应与Stata实现\"},{\"text\":\"(调节效应)交互项与分组回归有什么区别？\",\"link\":\"/MedMod/(调节效应)交互项与分组回归有什么区别？\"},{\"text\":\"理解调节效应的结果\",\"link\":\"/MedMod/理解调节效应的结果\"},{\"text\":\"调节效应——需要注意的问题\",\"link\":\"/MedMod/调节效应——需要注意的问题\"},{\"text\":\"绘制调节作用图\",\"link\":\"/MedMod/绘制调节作用图\"},{\"text\":\"绘制二次项的调节作用图\",\"link\":\"/MedMod/绘制二次项的调节作用图\"},{\"text\":\"直接绘制二次项调节作用图——Stata\",\"link\":\"/MedMod/直接绘制二次项调节作用图_——Stata绘图\"}]}],\"/Question/\":[{\"text\":\"常见问题\",\"collapse\":false,\"items\":[{\"text\":\"什么叫估计量的无偏性？一致性？有效性？\",\"link\":\"/Question/什么叫估计量的无偏性？一致性？有效性？\"},{\"text\":\"P值？T值？假设检验\",\"link\":\"/Question/P值？T值？假设检验\"},{\"text\":\"虚拟变量\",\"link\":\"/Question/虚拟变量\"},{\"text\":\"条件期望,E(Yx)\",\"link\":\"/Question/条件期望,E(Yx)\"},{\"text\":\"异方差及其后果、检验与处理\",\"link\":\"/Question/异方差及其后果、检验与处理\"},{\"text\":\"相关系数、回归系数符号不一致——如何处理\",\"link\":\"/Question/相关系数、回归系数符号不一致——如何处理\"},{\"text\":\"相关系数为正与回归系数为负，发生了什么？\",\"link\":\"/Question/相关系数为正与回归系数为负，发生了什么？\"},{\"text\":\"模型中加入无关变量会怎么样？\",\"link\":\"/Question/模型中加入无关变量会怎么样？\"},{\"text\":\"控制变量不显著可以删去吗？\",\"link\":\"/Question/控制变量不显著可以删去吗？\"},{\"text\":\"关于控制变量\",\"link\":\"/Question/关于控制变量\"},{\"text\":\"Bootstrap(自助法)\",\"link\":\"/Question/Bootstrap(自助法)\"},{\"text\":\"cluster？robust？关于标准误的选取\",\"link\":\"/Question/cluster？robust？关于标准误的选取\"},{\"text\":\"如何对标准误进行两次聚类\",\"link\":\"/Question/如何对标准误进行两次聚类\"},{\"text\":\"关于稳健性检验\",\"link\":\"/Question/关于稳健性检验\"},{\"text\":\"经济学上的安慰剂检验\",\"link\":\"/Question/经济学上的安慰剂检验\"},{\"text\":\"豪斯曼检验_(Hausman_test)出现负数结果怎么办？\",\"link\":\"/Question/豪斯曼检验(Hausman_test)_出现负数结果怎么办？\"},{\"text\":\"寻找工具变量的几种逻辑\",\"link\":\"/Question/寻找工具变量的几种逻辑\"},{\"text\":\"模型的R2偏小是一个问题吗？\",\"link\":\"/Question/模型的R2偏小是一个问题吗？\"},{\"text\":\"为什么变量会被omit掉？如何解决？\",\"link\":\"/Question/为什么变量会被omit掉？如何解决？\"},{\"text\":\"理论假设与实证结果相反\",\"link\":\"/Question/理论假设与实证结果相反\"},{\"text\":\"论文回归结果不显著怎么办？\",\"link\":\"/Question/论文回归结果不显著怎么办？\"},{\"text\":\"为什么存在医患矛盾——委托代理理论\",\"link\":\"/Question/为什么存在医患矛盾——委托代理理论\"},{\"text\":\"0,1变量需要中心化吗？\",\"link\":\"/Question/0,1变量需要中心化吗？\"},{\"text\":\"为什么会乱码？\",\"link\":\"/Question/为什么会乱码？\"},{\"text\":\"do(dta)文件乱码怎么办？\",\"link\":\"/Question/do(dta)文件乱码怎么办？\"},{\"text\":\"管理学研究中文本分析常用数据库\",\"link\":\"/Question/管理学研究中文本分析常用数据库\"},{\"text\":\"深度学习与管理学应用——个人分享\",\"link\":\"/Question/深度学习与管理学应用——个人分享\"},{\"text\":\"回答私信里常问的问题\",\"link\":\"/Question/回答私信里常问的问题\"}]}],\"/Writing/\":[{\"text\":\"论文写作\",\"collapse\":false,\"items\":[{\"text\":\"chatgpt学术使用\",\"link\":\"/Writing/chatgpt学术使用\"},{\"text\":\"关于论文的选题\",\"link\":\"/Writing/关于论文的选题\"},{\"text\":\"Endnote的入门\",\"link\":\"/Writing/Endnote的入门介绍如何写论文\"},{\"text\":\"word中画逻辑图\",\"link\":\"/Writing/word中画逻辑图\"},{\"text\":\"关于文献的检索\",\"link\":\"/Writing/关于文献的检索\"},{\"text\":\"关于论文排版的工具\",\"link\":\"/Writing/关于论文排版的工具\"},{\"text\":\"区分问题与主题\",\"link\":\"/Writing/区分问题与主题\"},{\"text\":\"在word中通过键盘快速输入公式\",\"link\":\"/Writing/在word中通过键盘快速输入公式\"},{\"text\":\"搜狗语言输入与自动纠错效率工具\",\"link\":\"/Writing/搜狗语言输入与自动纠错效率工具\"},{\"text\":\"朗读论文检查错误基于微软文本转语音_的实践\",\"link\":\"/Writing/朗读论文检查错误基于微软文本转语音_的实践\"},{\"text\":\"管理类本科实证毕业论文简介与指南\",\"link\":\"/Writing/管理类本科实证毕业论文简介与指南\"},{\"text\":\"让AI辅助你写论文_StataPython_Latex__in_ChatGPT\",\"link\":\"/Writing/让AI辅助你写论文_StataPython_Latex__in_ChatGPT\"},{\"text\":\"识别英语常用搭配Linggle.com\",\"link\":\"/Writing/识别英语常用搭配Linggle.com\"}]}],\"/SelfIntro/\":[{\"text\":\"个人分享\",\"collapse\":false,\"items\":[{\"text\":\"_UTD24FT50_是什么？\",\"link\":\"/SelfIntro/_UTD24FT50_是什么？\"},{\"text\":\"常用的数据来源\",\"link\":\"/SelfIntro/常用的数据来源\"},{\"text\":\"计量经济学常用资料查找方式\",\"link\":\"/SelfIntro/计量经济学常用资料查找方式\"},{\"text\":\"推荐的python入门视频\",\"link\":\"/SelfIntro/推荐的python入门视频\"},{\"text\":\"Stata入门与进阶的资料\",\"link\":\"/SelfIntro/Stata入门与进阶的资料\"},{\"text\":\"R、Stata、Python区别与选择\",\"link\":\"/SelfIntro/R、Stata、Python区别与选择\"},{\"text\":\"关于编程语言的一些理解(python,stata)\",\"link\":\"/SelfIntro/关于编程语言的一些理解(python,stata)\"},{\"text\":\"机器学习计量经济学关系与区别\",\"link\":\"/SelfIntro/机器学习计量经济学关系与区别\"},{\"text\":\"还是要好好掌握计量理论\",\"link\":\"/SelfIntro/还是要好好掌握计量理论\"},{\"text\":\"计量经济学教材推荐\",\"link\":\"/SelfIntro/计量经济学教材推荐\"},{\"text\":\"Stata、实证_GPT_prompt（指令）编写指南\",\"link\":\"/SelfIntro/Stata、实证_GPT_prompt（指令）编写指南\"},{\"text\":\"有关企业高管的研究\",\"link\":\"/SelfIntro/有关企业高管的研究\"},{\"text\":\"高管研究的经典文献The_Organization_as_a_Reflection_of_Its_Top_Managers（1984）\",\"link\":\"/SelfIntro/高管研究的经典文献The_Organization_as_a_Reflection_of_Its_Top_Managers（1984）\"},{\"text\":\"更新了一下我的网络小站\",\"link\":\"/SelfIntro/更新了一下我的网络小站\"},{\"text\":\"新年快乐，也立点Flag！今年好好更新视频\",\"link\":\"/SelfIntro/新年快乐，也立点Flag！今年好好更新视频\"}]}],\"/Tools/\":[{\"text\":\"常用工具\",\"collapse\":false,\"items\":[{\"text\":\"复制知网HTML网页中的文本\",\"link\":\"/Tools/复制知网HTML网页中的文本\"},{\"text\":\"获取PPT中所有图片\",\"link\":\"/Tools/获取PPT中所有图片\"},{\"text\":\"文本纠错\",\"link\":\"/Tools/文本纠错\"},{\"text\":\"屏幕标注软件Zoomit;Gink\",\"link\":\"/Tools/屏幕标注软件Zoomit;Gink\"},{\"text\":\"GithubDesktop做stata版本管理\",\"link\":\"/Tools/GithubDesktop做stata版本管理\"}]}],\"socialLinks\":[{\"icon\":\"bilibili\",\"link\":\"https://space.bilibili.com/9840842?spm_id_from=333.1007.0.0\"}]}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>