## 【小概念】虚拟变量
<div style="text-align: center;">
  <div style="border: 2px solid #ccc; padding: 10px; display: inline-block;">
<iframe src="//player.bilibili.com/player.html?bvid=BV1M7411K7ob&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="width: 750px; height: 450px;"></iframe>  </div>
</div>
【小概念】虚拟变量
================

虚拟变量（Dummy Variable）是指在统计学中，用来表示分类情况的一个变量。它主要用于分类的一个情况，比如说男女、是否吸烟、地区分类等。通常用0和1来表示分类，例如男为0，女为1。

虚拟变量在图形上或方程里的理解
------------------------

假设我们有一个方程：

$$y = \beta_0 + \beta_1 x + \beta_2 d$$

其中，$d$ 是虚拟变量，当 $d = 0$ 和 $d = 1$ 时，方程的表现形式不同。

当 $d = 0$ 时，方程为：

$$y = \beta_0 + \beta_1 x$$

当 $d = 1$ 时，方程为：

$$y = (\beta_0 + \beta_2) + (\beta_1 ) x$$

可以看到，当 $d$ 从0变为1时，截距都发生了变化。


虚拟变量的斜率变化
--------------

如果我们想要放宽假设，使得虚拟变量在跳跃后的斜率不同，可以在方程中加入虚拟变量和 $X_1$ 的交互项。

$$y = \beta_0 + \beta_1 x + \beta_2 d + \beta_3 d \times x$$

这时，当 $d = 0$ 时，方程为：

$$y = \beta_0 + \beta_1 x$$

当 $d = 1$ 时，方程为：

$$y = (\beta_0 + \beta_3) + (\beta_1 + \beta_2) x$$

可以看到，当 $d$ 从0变为1时，截距、斜率和斜率变化都发生了变化。


Dummy Variable Trap
-----------------

如果存在 $M$ 个类别，一般只能在方程中使用 $M-1$ 个虚拟变量，这是因为存在贡献性问题。

举个例子，假设我们有三年的数据，生成三个虚拟变量：

* 2003年：1，其他年份：0
* 2004年：1，其他年份：0
* 2005年：1，其他年份：0

如果我们用这三个变量回归，贡献性会体现在常数项上。如果我们把这三个变量加起来，就会得到一个完全多重贡献，导致某个虚拟变量被抛弃。

因此，在Stata回归中，它会自动抛弃一个虚拟变量，但如果我们自己做的话，就会存在共线性问题。

为什么不能用像1234这种连续的一个数据表示呢？
----------------------------------

这是因为如果使用1234这种连续的数据表示，会产生一个很强的假定，即每一年的间距是一样的。但实际上，每一年的间距可能是不同的。

因此，我们会生成很多的虚拟变量，让一个作为一个基准，比如以2003年作为一个基准，让所有的年份都跟它进行一个比较，来估计它的参数。这样的情况可能更为贴近真实的状况。

总之，虚拟变量是一个非常重要的概念，在统计学中得到了广泛的应用。了解虚拟变量的含义和用法，可以帮助我们更好地进行数据分析。
- - - - - -
